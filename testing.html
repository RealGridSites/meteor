<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Testing | Meteor Guide</title>
    <meta name="description" content="How to test your Meteor application / Meteor 앱 테스트하기">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="../images/favicon.png" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://meteor.realgrid.com">
    <meta property="og:title" content="Testing | Meteor Guide">
    <meta property="og:description" content="How to test your Meteor application / Meteor 앱 테스트하기">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@meteor">
    <meta name="twitter:title" content="Testing | Meteor Guide">
    <meta name="twitter:description" content="How to test your Meteor application / Meteor 앱 테스트하기">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/style/style.css">
  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="http://www.meteor.com/developers" title="Meteor Developers Developers"  >
        <img src="../images/logo-coralspace-left.svg" alt="Meteor Developers" class="logo"/>
        <span>Developers</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="http://www.meteor.com/tutorials" target=_new >
          <span>Tutorials</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop active ">
        <a class="link" href="http://guide.meteor.com"  >
          <span>Guide</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="http://docs.meteor.com"  >
          <span>API Docs</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="https://forums.meteor.com/" target=_new >
          <span>Forums</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="http://www.meteor.com/developers" title="Meteor Developers"  >
        <span>Meteor Developers Developers</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="http://www.meteor.com/tutorials" target=_new >
          <span>Tutorials</span>
        </a>
      </div>
    
      <div class="panel-item active"">
        <a class="" href="http://guide.meteor.com"  >
          <span>Guide</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://docs.meteor.com"  >
          <span>API Docs</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="https://forums.meteor.com/" target=_new >
          <span>Forums</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Meteor Guide</span>
      
        <span class="select version-sidebar nochrome">
          <select class="version-select">
            
              <option value="v1.4">1.4</option>
            
              <option value="v1.3">1.3</option>
            
              <option value="v1.2">1.2</option>
            
          </select>
        </span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search The Official Guide" id="desktop-search-input" />
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="code-style.html" class="sidebar-link ">
                  <span>Code Style</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="structure.html" class="sidebar-link ">
                  <span>Application Structure</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="1.4-migration.html" class="sidebar-link ">
                  <span>Migrating to Meteor 1.4</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="1.3-migration.html" class="sidebar-link ">
                  <span>Migrating to Meteor 1.3</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Data</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="collections.html" class="sidebar-link ">
                  <span>Collections and Schemas</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="data-loading.html" class="sidebar-link ">
                  <span>Publications and Data Loading</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="methods.html" class="sidebar-link ">
                  <span>Methods</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="accounts.html" class="sidebar-link ">
                  <span>Users and Accounts</span>
                </a>
              </li>
            
              
              <li class="item-toc  current">
                <a href="" class="sidebar-link  current">
                  <span>Testing</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">View</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="routing.html" class="sidebar-link ">
                  <span>URLs and Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="ui-ux.html" class="sidebar-link ">
                  <span>User Interfaces</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="blaze.html" class="sidebar-link ">
                  <span>Blaze</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="react.html" class="sidebar-link ">
                  <span>React</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="angular.html" class="sidebar-link ">
                  <span>Angular</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Build</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="atmosphere-vs-npm.html" class="sidebar-link ">
                  <span>Atmosphere vs. npm</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="using-atmosphere-packages.html" class="sidebar-link ">
                  <span>Using Atmosphere Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="writing-atmosphere-packages.html" class="sidebar-link ">
                  <span>Writing Atmosphere Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="using-npm-packages.html" class="sidebar-link ">
                  <span>Using npm Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="writing-npm-packages.html" class="sidebar-link ">
                  <span>Writing npm Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mobile.html" class="sidebar-link ">
                  <span>Mobile</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="build-tool.html" class="sidebar-link ">
                  <span>Build System</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Production</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="security.html" class="sidebar-link ">
                  <span>Security</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="deployment.html" class="sidebar-link ">
                  <span>Deployment and Monitoring</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Meta</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="CONTRIBUTING.html" class="sidebar-link ">
                  <span>Contribution Guidelines</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="CHANGELOG.html" class="sidebar-link ">
                  <span>Changelog</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Testing</h1>
      
        <div class="subtitle-page">How to test your Meteor application / Meteor 앱 테스트하기</div>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/meteor/guide/tree/master/content/testing.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
            <a class="btn tertiary small round lowercase" href="https://forums.meteor.com/t/20191"><span class="icon-comment"></span> <span>Discuss</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <h2 id="introduction">Introduction</h2>

<p>소개</p>
<p>Testing allows you to ensure your application works the way you think it does, especially as your codebase changes over time. If you have good tests, you can refactor and rewrite code with confidence. Tests are also the most concrete form of documentation of expected behavior, since other developers can figure out how to use your code by reading the tests.</p>
<p>테스트를 통해 응용 프로그램이 생각대로 작동하는지 확인할 수 있습니다. 특히 코드베이스가 시간이 지남에 따라 변경됩니다. 좋은 테스트를 거쳤다면 자신감을 갖고 리팩토링하고 코드를 다시 작성할 수 있습니다. 테스트는 테스트를 읽음으로써 코드를 사용하는 방법을 다른 개발자가 알아낼 수 있기 때문에 테스트는 예상되는 동작을 문서화하는 가장 구체적인 형식이기도합니다.</p>
<p>Automated testing is critical because it allows you to run a far greater set of tests much more often than you could manually, allowing you to catch regression errors immediately.</p>
<p>자동화된 테스트는 수동으로 할 수있는 것보다 훨씬 더 많은 테스트를 훨씬 많이 실행할 수 있으므로 회귀 오류를 즉각적으로 발견 할 수 있기 때문에 중요합니다.</p>
<h3 id="testing-types">Types of tests</h3>

<p>테스트 유형</p>
<p>Entire books have been written on the subject of testing, so we will simply touch on some basics of testing here. The important thing to consider when writing a test is what part of the application you are trying to test, and how you are verifying the behavior works.</p>
<ul>
<li><p><strong>Unit test</strong>: If you are testing one small module of your application, you are writing a unit test. You’ll need to <em>stub</em> and <em>mock</em> other modules that your module usually leverages in order to <em>isolate</em> each test. You’ll typically also need to <em>spy</em> on actions that the module takes to verify that they occur.</p>
</li>
<li><p><strong>Integration test</strong>: If you are testing that multiple modules behave properly in concert, you are writing an integration test. Such tests are much more complex and may require running code both on the client and on the server to verify that communication across that divide is working as expected. Typically an integration test will still isolate a part of the entire application and directly verify results in code.</p>
</li>
<li><p><strong>Acceptance test</strong>: If you want to write a test that can be run against any running version of your app and verifies at the browser level that the right things happen when you push the right buttons, then you are writing an acceptance test (sometimes called “end to end test”). Such tests typically try to hook into the application as little as possible, beyond perhaps setting up the right data to run a test against.</p>
</li>
<li><p><strong>Load test</strong>: Finally you may wish to test that your application works under typical load or see how much load it can handle before it falls over. This is called a load test or stress test. Such tests can be challenging to set up and typically aren’t run often but are very important for confidence before a big production launch.</p>
</li>
</ul>
<p>테스트라는 주제에 대해서는 이미 많은 책이 있으므로 여기서는 테스트에 대해 간단히 언급만 해 보겠습니다. 테스트를 작성할 때 고려해야 할 중요한 사항은 테스트하려는 응용 프로그램의 부분과 동작을 검증하는 방법입니다.</p>
<ul>
<li><p><strong>단위 테스트</strong>:하나의 작은 모듈을 테스트하는 경우 단위 테스트를 작성합니다. 각 테스트를 <em>isolate(분리)</em> 하기 위해 모듈이 일반적으로 활용하는 다른 모듈을 <em>stub</em> 하고 <em>mock</em> 해야합니다. 또한 일반적으로 모듈이 발생했는지 확인하기 위해 수행하는 작업에 대해 <em>spy</em> 작업을 수행해야합니다.</p>
</li>
<li><p><strong>통합 테스트</strong>:여러 모듈이 제대로 작동하는지 테스트하는 경우 통합 테스트를 작성하고 있습니다. 이러한 테스트는 훨씬 복잡하며 클라이언트와 서버 모두에서 코드를 실행하여 해당 분할에서의 통신이 예상대로 작동하는지 확인해야 할 수 있습니다. 일반적으로 통합 테스트는 전체 응용 프로그램의 일부를 격리하고 결과를 코드로 직접 확인합니다.</p>
</li>
<li><p><strong>수락 테스트</strong>:실행중인 앱 버전에 대해 실행할 수있는 테스트를 작성하고 브라우저 레벨에서 올바른 버튼을 누를 때 올바른 일이 발생하는지 확인한 다음 수락을 작성합니다 테스트 (“엔드 투 엔드 테스트”라고도 함). 이러한 테스트는 일반적으로 테스트를 실행하기에 적합한 데이터를 설정하는 것 이상의 응용 프로그램에 가능한 한 많이 연결하지 않으려고 시도합니다.</p>
</li>
<li><p><strong>로드 테스트</strong>:마지막으로 응용 프로그램이 일반적인 로드에서 작동하는지 테스트하거나 뻗어버리기전에 처리 할 수있는 로드가 얼마나되는지 확인하고자 할 수 있습니다. 이를 부하 테스트 또는 스트레스 테스트 라고합니다. 이러한 테스트는 설정하기가 어려울 수 있으며 일반적으로 자주 실행되지는 않지만 대량 생산이 시작되기 전에 자신감에 있어 매우 중요합니다.</p>
</li>
</ul>
<h3 id="challenges-with-meteor">Challenges of testing in Meteor</h3>

<p>Meteor에서의 테스트 과제</p>
<p>In most ways, testing a Meteor app is no different from testing any other full stack JavaScript application. However, compared to more traditional backend or front-end focused frameworks, two factors can make testing a little more challenging:</p>
<ul>
<li><p><strong>Client/server data</strong>: Meteor’s data system makes it simple to bridge the client-server gap and often allows you to build your application without thinking about how data moves around. It becomes critical to test that your code does actually work correctly across that gap. In traditional frameworks where you spend a lot of time thinking about interfaces between client and server you can often get away with testing both sides of the interface in isolation, but Meteor’s <a href="#test-modes">full app test mode</a> makes it easy to write <a href="#full-app-integration-test">integration tests</a> that cover the full stack. Another challenge here is creating test data in the client context; we’ll discuss ways to do this in the <a href="#generating-test-data">section on generating test data</a> below.</p>
</li>
<li><p><strong>Reactivity</strong>: Meteor’s reactivity system is “eventually consistent” in the sense that when you change a reactive input to the system, you’ll see the user interface change to reflect this some time later. This can be a challenge when testing, but there are some ways to wait until those changes happen to verify the results, for example <code>Tracker.afterFlush()</code>.</p>
</li>
</ul>
<p>대부분의 경우, Meteor 앱을 테스트하는 것은 다른 전체 스택 JavaScript 애플리케이션을 테스트하는 것과 다르지 않습니다. 그러나보다 전통적인 백엔드 또는 프론트 엔드에 초점을 맞춘 프레임 워크와 비교할 때 두 가지 요인으로 인해 테스트가 좀 더 어려워 질 수 있습니다.</p>
<ul>
<li><p><strong>클라이언트/서버 데이터</strong>:Meteor의 데이터 시스템은 클라이언트-서버 갭을 메우는 것을 간단하게하며 데이터가 어떻게 움직이는지를 생각하지 않고 애플리케이션을 구축 할 수 있습니다. 코드가 실제로 해당 갭에서 올바르게 작동하는지 테스트하는 것이 중요합니다. Meteor의 <a href="#test-modes">full app test mode</a>를 사용하면 클라이언트와 서버 간의 인터페이스에 대해 많은 시간을 생각하는 전통적인 프레임 워크에서 인터페이스의 양면을 별도로 테스트하면 쉽게 벗어날 수 있습니다. 전체 스택을 포괄하는 <a href="#full-app-integration-test">integration tests</a>를 작성하십시오. 또 다른 도전 과제는 클라이언트 컨텍스트에서 테스트 데이터를 작성하는 것입니다. 아래의 <a href="#generating-test-data">section on generating test data</a>에서 이 작업을 수행하는 방법을 설명합니다.</p>
</li>
<li><p><strong>반응성</strong>:Meteor의 반응형 시스템은 반응성 입력을 시스템으로 변경하면 얼마 후 이것을 반영하는 사용자 인터페이스가 변경된다는 의미에서 “궁극적으로 일관성”이 있습니다. 이것은 테스트 할 때 어려울 수 있지만 결과를 확인하기 위해 변경 사항이 발생할 때까지 기다릴 수있는 몇 가지 방법이 있습니다. 예를들어 <code>Tracker.afterFlush()</code>.</p>
</li>
</ul>
<h2 id="test-modes">The ‘meteor test’ command</h2>

<p>‘meteor test’ 명령</p>
<p>The primary way to test your application in Meteor is the <code>meteor test</code> command.</p>
<p>Meteor에서 응용 프로그램을 테스트하는 주요 방법은 <code>meteor test</code> 명령입니다.</p>
<p>This loads your application in a special “test mode”. What this does is:</p>
<ol>
<li><em>Doesn’t</em> eagerly load <em>any</em> of our application code as Meteor normally would.</li>
<li><em>Does</em> eagerly load any file in our application (including in <code>imports/</code> folders) that look like <code>*.test[s].*</code>, or <code>*.spec[s].*</code></li>
<li>Sets the <code>Meteor.isTest</code> flag to be true.</li>
<li>Starts up the test driver package (<a href="#driver-packages">see below</a>).</li>
</ol>
<p>특수한 “테스트 모드”로 응용 프로그램을 로드합니다. 이것이 하는 일은 :</p>
<ol>
<li>Meteor가 <em>일반적</em> 으로하는 것처럼 애플리케이션 코드를 열심히 로드 <em>하지 않습니다.</em></li>
<li><code>*.test[s].*</code> 또는<code>*.spec[s].*</code> 처럼 보이는 우리의 응용 프로그램 (<code>imports/</code> 폴더 포함)에 있는 파일을 열심히 로드합니다.</li>
<li>‘Meteor.isTest` 플래그를 true로 설정합니다.</li>
<li>테스트 드라이버 패키지를 시작합니다 (<a href="#driver-packages">아래 참조</a>).</li>
</ol>
<blockquote>
<p>The <a href="build-tool.html#what-it-does">Meteor build tool</a> and the <code>meteor test</code> command ignore any files located in any <code>tests/</code> directory. This allows you to put tests in this directory that you can run using a test runner outside of Meteor’s built-in test tools and still not have those files loaded in your application. See Meteor’s <a href="structure.html#load-order">default file load order</a> rules.</p>
<p><a href="build-tool.html#what-it-does">Meteor build tool</a>과 <code>meteor test</code> 명령은 <code>tests/</code> 디렉토리에 있는 파일을 무시합니다. 이 디렉토리에 Meteor의 빌트인 테스트툴 밖에 있는 테스트 러너를 사용하여 실행할 수있는 테스트를이 애플리케이션에 로드할 필요가 없습니다. Meteor의 <a href="structure.html#load-order">기본 파일로드 순서</a> 규칙을 참조하십시오.</p>
</blockquote>
<p>What this means is that you can write tests in files with a certain filename pattern and know they’ll not be included in normal builds of your app. When your app runs in test mode, those files will be loaded (and nothing else will), and they can import the modules you want to test. As we’ll see this is ideal for <a href="#unit-testing">unit tests</a> and <a href="structure.html#load-order">default file load order</a>.</p>
<p>이것이 의미하는 바는 특정 파일 이름 패턴을 가진 파일에 테스트를 작성하고 앱의 일반 빌드에 포함되지 않는다는 것을 알 수 있다는 것입니다. 앱이 테스트 모드에서 실행되면 해당 파일이로드되며 테스트 할 모듈을 가져올 수 있습니다. 여기서 알 수 있듯이 이것은 <a href="#unit-testing">unit tests</a> 및 <a href="structure.html#load-order">default file load order</a>에 이상적입니다.</p>
<p>Additionally, Meteor offers a “full application” test mode. You can run this with <code>meteor test --full-app</code>.</p>
<p>또한, Meteor는 “전체 어플리케이션”테스트 모드를 제공합니다. <code>meteor test --full-app</code> 명령으로 실행할 수 있습니다.</p>
<p>This is similar to test mode, with key differences:</p>
<ol>
<li>It loads test files matching <code>*.app-test[s].*</code> and <code>*.app-spec[s].*</code>.</li>
<li>It <strong>does</strong> eagerly load our application code as Meteor normally would.</li>
<li>Sets the <code>Meteor.isAppTest</code> flag to be true (instead of the <code>Meteor.isTest</code> flag).</li>
</ol>
<p>주요 차이점은 테스트 모드와 유사합니다.</p>
<p>1.<code>*.app-test[s].*</code> 및 <code>*.app-spec[s].*</code> 와 일치하는 테스트 파일을 로드합니다.</p>
<ol>
<li>Meteor가 일반적으로하는 것처럼 응용 프로그램 코드를 열심히 로드 <strong>합니다.</strong><br>3.<code>Meteor.isAppTest</code> 플래그를 (Meteor.isTest` 플래그 대신) true로 설정합니다.</li>
</ol>
<p>This means that the entirety of your application (including for instance the web server and client side router) is loaded and will run as normal. This enables you to write much more <a href="#full-app-integration-test">complex integration tests</a> and also load additional files for <a href="#acceptance-testing">acceptance tests</a>.</p>
<p>즉, 응용 프로그램 전체 (예:웹 서버 및 클라이언트 측 라우터 포함)가로드되고 정상적으로 실행됩니다. 이를 통해 훨씬 더 많은 <a href="#full-app-integration-test">complex integration tests</a>를 작성하고 <a href="#acceptance-testing">acceptance tests(수용 테스트)</a>에 대한 추가 파일을 로드 할 수 있습니다.</p>
<p>Note that there is another test command in the Meteor tool; <code>meteor test-packages</code> is a way of testing Atmosphere packages, which is discussed in the <a href="writing-packages.html#testing">Writing Packages article</a>.</p>
<p>Meteor 도구에는 또 다른 테스트 명령이 있습니다. <code>meteor test-packages</code> 는 <a href="writing-packages.html#testing">Writing Packages article</a>에서 논의되는 Atmosphere 패키지를 테스트하는 방법입니다.</p>
<h3 id="driver-packages">Driver packages</h3>

<p>드라이버 패키지</p>
<p>When you run a <code>meteor test</code> command, you must provide a <code>--driver-package</code> argument. A test driver is a mini-application that runs in place of your app and runs each of your defined tests, whilst reporting the results in some kind of user interface.</p>
<p><code>meteor test</code> 명령을 실행할 때 <code>--driver-package</code> 인자를 제공해야 합니다. 테스트 드라이버는 앱 대신 실행되고 정의 된 각 테스트를 실행하는 미니 애플리케이션으로, 일종의 사용자 인터페이스로 결과를 보고합니다.</p>
<p>There are two main kinds of test driver packages:</p>
<p>두 종류의 테스트 드라이버 패키지가 있습니다 :</p>
<ul>
<li><p><strong>Web reporters</strong>: Meteor applications that display a special test reporting web UI that you can view the test results in.</p>
</li>
<li><p><strong>Web reporters</strong>: 테스트 결과를 볼 수있는 특별한 테스트 보고 웹 UI를 표시하는 Meteor 애플리케이션.</p>
</li>
</ul>
<p><img src="images/mocha-test-results.png"></p>
<ul>
<li><p><strong>Console reporters</strong>: These run completely on the command-line and are primary used for automated testing like <a href="#ci">continuous integration</a> (as we’ll see, typically PhantomJS is used to drive such tests).</p>
</li>
<li><p><strong>Console reporters</strong>:명령 행에서 완전히 실행되며 <a href="#ci">continuous integration</a> 과 같은 자동 테스트에 주로 사용됩니다 (일반적으로 PhantomJS가 이러한 테스트를 수행하는 데 사용됩니다).</p>
</li>
</ul>
<h3 id="mocha">Recommended: Mocha</h3>

<p>추천: Mocha</p>
<p>In this article, we’ll use the popular <a href="https://mochajs.org" target="_blank" rel="external">Mocha</a> test runner alongside the <a href="http://chaijs.com" target="_blank" rel="external">Chai</a> assertion library to test our application. In order to write and run tests in Mocha, we need to add an appropriate test driver package.</p>
<p>이 기사에서는 인기있는 <a href="https://mochajs.org" target="_blank" rel="external">Mocha</a> 테스트 러너를 <a href="http://chaijs.com" target="_blank" rel="external">Chai</a> 어설 션 라이브러리와 함께 사용하여 애플리케이션을 테스트합니다. 모카에서 테스트를 작성하고 실행하려면 적절한 테스트 드라이버 패키지를 추가해야합니다.</p>
<p>There are several options. Choose the ones that makes sense for your app. You may depend on more than one and set up different test commands for different situations.</p>
<ul>
<li><a href="https://atmospherejs.com/practicalmeteor/mocha" target="_blank" rel="external">practicalmeteor:mocha</a> Runs client and server package or app tests and displays all results in a browser. Use <a href="https://www.npmjs.com/package/spacejam" target="_blank" rel="external">spacejam</a> for command line/CI support.</li>
<li><a href="https://atmospherejs.com/dispatch/mocha-phantomjs" target="_blank" rel="external">dispatch:mocha-phantomjs</a> Runs client and server package or app tests using PhantomJS and reports all results in the server console. Can be used for running tests on a CI server. Has a watch mode.</li>
<li><a href="https://atmospherejs.com/dispatch/mocha-browser" target="_blank" rel="external">dispatch:mocha-browser</a> Runs client and server package or app tests with Mocha reporting client results in a web browser and server results in the server console. Has a watch mode.</li>
<li><a href="https://atmospherejs.com/dispatch/mocha" target="_blank" rel="external">dispatch:mocha</a> Runs server-only package or app tests with Mocha and reports all results in the server console. Can be used for running tests on a CI server. Has a watch mode.</li>
</ul>
<p>몇 가지 옵션이 있습니다. 앱에 적합한 것을 선택하십시오. 둘 이상에 의존하고 상황에 따라 다른 테스트 명령을 설정할 수 있습니다.</p>
<ul>
<li><a href="https://atmospherejs.com/practicalmeteor/mocha" target="_blank" rel="external">practicalmeteor:mocha</a> 클라이언트 및 서버 패키지 또는 app 테스트를 실행하고 모든 결과를 브라우저에 표시합니다. 명령 행/CI 지원은 <a href="https://www.npmjs.com/package/spacejam" target="_blank" rel="external">spacejam</a>을 사용하십시오.</li>
<li><a href="https://atmospherejs.com/dispatch/mocha-phantomjs" target="_blank" rel="external">dispatch:mocha-phantomjs</a> PhantomJS를 사용하여 클라이언트 및 서버 패키지 또는 응용 프로그램 테스트를 실행하고 모든 결과를 서버 콘솔에보고합니다. CI 서버에서 테스트를 실행하는 데 사용할 수 있습니다. 시계 모드 있음.</li>
<li><a href="https://atmospherejs.com/dispatch/mocha-browser" target="_blank" rel="external">dispatch:mocha-browser</a> Mocha보고 클라이언트 결과로 클라이언트 및 서버 패키지 또는 응용 프로그램 테스트를 실행하고 웹 브라우저에서 서버 결과를 서버 콘솔에 표시합니다. 시계 모드 있음.</li>
<li><a href="https://atmospherejs.com/dispatch/mocha" target="_blank" rel="external">dispatch:mocha</a> 모카와 함께 서버 전용 패키지 또는 앱 테스트를 실행하고 모든 결과를 서버 콘솔에보고합니다. CI 서버에서 테스트를 실행하는 데 사용할 수 있습니다. 시계 모드 있음.</li>
</ul>
<p>These packages don’t do anything in development or production mode. They declare themselves <code>testOnly</code> so they are not even loaded outside of testing. But when our app is run in <a href="#test-modes">test mode</a>, the test driver package takes over, executing test code on both the client and server, and rendering results to the browser.</p>
<p>이 패키지는 개발 또는 생산 모드에서는 아무 것도하지 않습니다. 그들은 스스로 testOnly를 선언하므로 테스트를하지 않아도로드됩니다. 그러나 우리의 앱이 <a href="#test-modes">test mode</a>에서 실행되면 테스트 드라이버 패키지가 인계 받아 클라이언트와 서버 모두에서 테스트 코드가 실행되고 결과가 브라우저에 렌더링됩니다.</p>
<p>Here’s how we can add the <a href="https://atmospherejs.com/practicalmeteor/mocha" target="_blank" rel="external"><code>practicalmeteor:mocha</code></a> package to our app:</p>
<p>다음은 우리 앱에 <a href="https://atmospherejs.com/practicalmeteor/mocha" target="_blank" rel="external"><code>practicalmeteor:mocha</code></a> 패키지를 추가하는 방법입니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor add practicalmeteor:mocha</span><br></pre></td></tr></table></figure>
<h2 id="test-files">Test Files</h2>

<p>테스트 파일</p>
<p>Test files themselves (for example a file named <code>todos-item.test.js</code> or <code>routing.app-specs.coffee</code>) can register themselves to be run by the test driver in the usual way for that testing library. For Mocha, that’s by using <code>describe</code> and <code>it</code>:</p>
<p>테스트 파일 자체는 (예를 들어<code>todos-item.test.js</code> 또는<code>routing.app-specs.coffee</code>라는 파일) 테스트 라이브러리가 평소와 같이 테스트 드라이버에 의해 실행되도록 등록 할 수 있습니다. 모카는<code>describe</code>와<code>it</code>을 사용합니다 :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">describe(<span class="string">'my module'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'does something that should be tested'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// This code will be executed by the test driver when the app is started</span></span><br><span class="line">    <span class="comment">// in the correct mode</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Note that arrow function use with Mocha <a href="http://mochajs.org/#arrow-functions" target="_blank" rel="external">is discouraged</a>.</p>
<p>Mocha와 함께 화살표 기능을 사용하는 것은 <a href="http://mochajs.org/#arrow-functions" target="_blank" rel="external">권장되지 않습니다.</a>.</p>
<h2 id="test-data">Test data</h2>

<p>테스트 데이터</p>
<p>When your app is run in test mode, it is initialized with a clean test database.</p>
<p>앱이 테스트 모드로 실행되면 클린 테스트 데이터베이스로 초기화됩니다.</p>
<p>If you are running a test that relies on using the database, and specifically the content of the database, you’ll need to perform some <em>setup</em> steps in your test to ensure the database is in the state you expect. There are some tools you can use to do this.</p>
<p>데이터베이스 사용에 의존하는 테스트, 특히 데이터베이스의 내용을 사용하는 경우 테스트에서 <em> setup </em> 단계를 수행하여 데이터베이스가 예상 한 상태에 있는지 확인해야합니다. 이를 수행하는 데 사용할 수있는 도구가 있습니다.</p>
<p>To ensure the database is clean, the <a href="https://atmospherejs.com/xolvio/cleaner" target="_blank" rel="external"><code>xolvio:cleaner</code></a> package is useful. You can use it to reset the database in a <code>beforeEach</code> block:</p>
<p>데이터베이스가 깨끗한 지 확인하려면 <a href="https://atmospherejs.com/xolvio/cleaner" target="_blank" rel="external"><code>xolvio:cleaner</code></a> 패키지가 유용합니다. <code>beforeEach</code> 블록에서 데이터베이스를 리셋하는데 사용할 수 있습니다 :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; resetDatabase &#125; <span class="keyword">from</span> <span class="string">'meteor/xolvio:cleaner'</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'my module'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  beforeEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    resetDatabase();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>This technique will only work on the server. If you need to reset the database from a client test, you can use a method to do so:</p>
<p>이 기술은 서버에서만 작동합니다. 클라이언트 테스트에서 데이터베이스를 재설정해야하는 경우 메소드를 사용하여 수행 할 수 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; resetDatabase &#125; <span class="keyword">from</span> <span class="string">'meteor/xolvio:cleaner'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> Before writing a method like this you'll want to double check</span></span><br><span class="line"><span class="comment">// that this file is only going to be loaded in test mode!!</span></span><br><span class="line">Meteor.methods(&#123;</span><br><span class="line">  <span class="string">'test.resetDatabase'</span>: <span class="function"><span class="params">()</span> =&gt;</span> resetDatabase(),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'my module'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</span><br><span class="line">  beforeEach(<span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// We need to wait until the method call is done before moving on, so we</span></span><br><span class="line">    <span class="comment">// use Mocha's async mechanism (calling a done callback)</span></span><br><span class="line">    Meteor.call(<span class="string">'test.resetDatabase'</span>, done);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>As we’ve placed the code above in a test file, it <em>will not</em> load in normal development or production mode (which would be an incredibly bad thing!). If you create a Atmosphere package with a similar feature, you should mark it as <code>testOnly</code> and it will similarly only load in test mode.</p>
<p>위의 코드를 테스트 파일에 배치 했으므로 표준 개발 모드 나 생산 모드에서는로드되지 않습니다 (엄청나게 나쁜 일입니다!). 유사한 기능을 가진 Atmosphere 패키지를 생성한다면,이를 ‘testOnly’로 표시해야하며 마찬가지로 테스트 모드로만로드됩니다.</p>
<h3 id="generating-test-data">Generating test data</h3>

<p>테스트 데이터 생성</p>
<p>Often it’s sensible to create a set of data to run your test against. You can use standard <code>insert()</code> calls against your collections to do this, but often it’s easier to create <em>factories</em> which help encode random test data. A great package to use to do this is <a href="https://atmospherejs.com/dburles/factory" target="_blank" rel="external"><code>dburles:factory</code></a>.</p>
<p>종종 테스트를 실행하기 위해 일련의 데이터를 만드는 것이 현명합니다. 콜렉션에 대해 표준 <code>insert()</code> 호출을 사용하여이를 수행 할 수 있지만 종종 무작위 테스트 데이터를 인코딩하는 데 도움이되는 <em>factories</em> 를 만드는 것이 더 쉽습니다. 이것을 하기위한 훌륭한 패키지는 <a href="https://atmospherejs.com/dburles/factory" target="_blank" rel="external"><code>dburles:factory</code></a> 입니다.</p>
<p>In the <a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> example app, we define a factory to describe how to create a test todo item, using the <a href="https://www.npmjs.com/package/faker" target="_blank" rel="external"><code>faker</code></a> npm package:</p>
<p><a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> 예제 애플리케이션에서는 <a href="https://www.npmjs.com/package/faker" target="_blank" rel="external"><code>faker</code></a>를 사용하여 테스트 대상 항목을 만드는 방법을 설명하는 팩토리를 정의합니다.) npm 패키지 :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> faker <span class="keyword">from</span> <span class="string">'faker'</span>;</span><br><span class="line"></span><br><span class="line">Factory.define(<span class="string">'todo'</span>, Todos, &#123;</span><br><span class="line">  <span class="attr">listId</span>: <span class="function"><span class="params">()</span> =&gt;</span> Factory.get(<span class="string">'list'</span>),</span><br><span class="line">  <span class="attr">text</span>: <span class="function"><span class="params">()</span> =&gt;</span> faker.lorem.sentence(),</span><br><span class="line">  <span class="attr">createdAt</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>To use the factory in a test, we simply call <code>Factory.create</code>:</p>
<p>테스트에서 팩토리를 사용하려면 단순히 <code>Factory.create</code>를 호출하면된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This creates a todo and a list in the database and returns the todo.</span></span><br><span class="line"><span class="keyword">const</span> todo = Factory.create(<span class="string">'todo'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// If we have a list already, we can pass in the id and avoid creating another:</span></span><br><span class="line"><span class="keyword">const</span> list = Factory.create(<span class="string">'list'</span>);</span><br><span class="line"><span class="keyword">const</span> todoInList = Factory.create(<span class="string">'todo'</span>, &#123; <span class="attr">listId</span>: list._id &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="mocking-the-database">Mocking the database</h3>

<p>As <code>Factory.create</code> directly inserts documents into the collection that’s passed into the <code>Factory.define</code> function, it can be a problem to use it on the client. However there’s a neat isolation trick that you can do to replace the server-backed <code>Todos</code> <a href="collections.html#client-collections">client collection</a> with a mocked out <a href="#collections.html#local-collections">local collection</a>, that’s encoded in the <a href="https://atmospherejs.com/hwillson/stub-collections" target="_blank" rel="external"><code>hwillson:stub-collections</code></a> package.</p>
<p><code>Factory.create</code>는 <code>Factory.define</code> 함수에 전달 된 콜렉션에 직접 문서를 삽입하기 때문에 클라이언트에서 사용하는 것이 문제가 될 수 있습니다. 그러나 서버 기반 <code>Todos</code> <a href="collections.html#client-collections">client collection</a> 을 모형으로 만든 <a href="#collections.html#local-collections">local collection</a> 으로 대체 할 수있는 깔끔한 격리 트릭이 있습니다. 그것은 <a href="https://atmospherejs.com/hwillson/stub-collections" target="_blank" rel="external"><code>hwillson:stub-collections</code></a> 패키지로 인코딩되어 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> StubCollections <span class="keyword">from</span> <span class="string">'meteor/hwillson:stub-collections'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Todos &#125; <span class="keyword">from</span> <span class="string">'path/to/todos.js'</span>;</span><br><span class="line"></span><br><span class="line">StubCollections.stub(Todos);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Now Todos is stubbed to a simple local collection mock,</span></span><br><span class="line"><span class="comment">//   so for instance on the client we can do:</span></span><br><span class="line">Todos.insert(&#123; <span class="attr">a</span>: <span class="string">'document'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Restore the `Todos` collection</span></span><br><span class="line">StubCollections.restore();</span><br></pre></td></tr></table></figure>
<p>In a Mocha test, it makes sense to use <code>stub-collections</code> in a <code>beforeEach</code>/<code>afterEach</code> block.</p>
<p>Mocha 테스트에서<code>beforeEach</code> /<code>afterEach</code> 블록에`stub-collections ‘을 사용하는 것이 합리적입니다.</p>
<h2 id="unit-testing">Unit testing</h2>

<p>단위 테스트</p>
<p>Unit testing is the process of isolating a section of code and then testing that the internals of that section work as you expect. As <a href="structure.html">we’ve split our code base up into ES2015 modules</a> it’s natural to test those modules one at a time.</p>
<p>단위 테스트는 코드 섹션을 분리 한 다음 해당 섹션의 내부가 예상대로 작동하는지 테스트하는 프로세스입니다. <a href="structure.html">코드 기반을 ES2015 모듈로 분할했습니다</a> 한 번에 하나씩 모듈을 테스트하는 것이 자연 스럽습니다.</p>
<p>By isolating a module and simply testing its internal functionality, we can write tests that are <em>fast</em> and <em>accurate</em>—they can quickly tell you where a problem in your application lies. Note however that incomplete unit tests can often hide bugs because of the way they stub out dependencies. For that reason it’s useful to combine unit tests with slower (and perhaps less commonly run) integration and acceptance tests.</p>
<p>모듈을 분리하고 내부 기능을 테스트함으로써 <em> 신속하고 </em> 정확한 * 테스트를 작성하여 응용 프로그램의 문제가있는 곳을 신속하게 알려줄 수 있습니다. 그러나 불완전한 유닛 테스트는 종속물을 떼어 내기 때문에 버그를 숨길 수 있습니다. 이러한 이유 때문에 단위 테스트를 통합 및 수용 테스트의 속도가 느린 (또는 덜 일반적으로 실행되는) 테스트와 결합하는 것이 유용합니다.</p>
<h3 id="simple-blaze-unit-test">A simple Blaze unit test</h3>

<p>간단한 Blaze 단위 테스트</p>
<p>In the <a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> example app, thanks to the fact that we’ve split our User Interface into <a href="ui-ux.html#components">smart and reusable components</a>, it’s natural to want to unit test some of our reusable components (we’ll see below how to <a href="#simple-integration-test">integration test</a> our smart components).</p>
<p><a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> 예제 앱에서는 사용자 인터페이스를 <a href="ui-ux.html#구성 요소">스마트하고 재사용 가능한 구성 요소</a>로 분할했기 때문에 재사용 가능한 구성 요소의 단위 테스트를 원한다면 자연 스럽습니다 (스마트 구성 요소의 <a href="#simple-integration-test">통합 테스트</a> 방법 참조).</p>
<p>To do so, we’ll use a very simple test helper that renders a Blaze component off-screen with a given data context. As we place it in <code>imports</code>, it won’t load in our app by in normal mode (as it’s not required anywhere).</p>
<p><a href="https://github.com/meteor/todos/blob/master/imports/ui/test-helpers.js" target="_blank" rel="external"><code>imports/ui/test-helpers.js</code></a>:</p>
<p>이를 위해 Blaze 구성 요소를 주어진 데이터 컨텍스트로 화면 밖으로 렌더링하는 매우 간단한 테스트 도우미를 사용합니다. 우리가`imports ‘에 넣었던 것처럼, 앱이 정상 모드로로드되지 않습니다 (어디에서나 필요하지 않음).</p>
<p><a href="https://github.com/meteor/todos/blob/master/imports/ui/test-helpers.js" target="_blank" rel="external"><code>imports/ui/test-helpers.js</code></a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _ &#125; <span class="keyword">from</span> <span class="string">'meteor/underscore'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Template &#125; <span class="keyword">from</span> <span class="string">'meteor/templating'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Blaze &#125; <span class="keyword">from</span> <span class="string">'meteor/blaze'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Tracker &#125; <span class="keyword">from</span> <span class="string">'meteor/tracker'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> withDiv = <span class="function"><span class="keyword">function</span> <span class="title">withDiv</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> el = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(el);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    callback(el);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(el);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> withRenderedTemplate = <span class="function"><span class="keyword">function</span> <span class="title">withRenderedTemplate</span>(<span class="params">template, data, callback</span>) </span>&#123;</span><br><span class="line">  withDiv(<span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> ourTemplate = _.isString(template) ? Template[template]:template;</span><br><span class="line">    Blaze.renderWithData(ourTemplate, data, el);</span><br><span class="line">    Tracker.flush();</span><br><span class="line">    callback(el);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>A simple example of a reusable component to test is the <a href="https://github.com/meteor/todos/blob/master/imports/ui/components/todos-item.html" target="_blank" rel="external"><code>Todos_item</code></a> template. Here’s what a unit test looks like (you can see some <a href="https://github.com/meteor/todos/blob/master/imports/ui/components/client" target="_blank" rel="external">others in the app repository</a>).</p>
<p><a href="https://github.com/meteor/todos/blob/master/imports/ui/components/client/todos-item.tests.js" target="_blank" rel="external"><code>imports/ui/components/client/todos-item.tests.js</code></a>:</p>
<p>테스트 할 재사용 가능한 구성 요소의 간단한 예제는 <a href="https://github.com/meteor/todos/blob/master/imports/ui/components/todos-item.html" target="_blank" rel="external"><code>Todos_item</code></a> 템플릿입니다. 단위 테스트는 다음과 같습니다 (일부 <a href="https://github.com/meteor/todos/blob/master/imports/ui/components/client" target="_blank" rel="external">앱 저장소의 다른 부분</a>). 참조).</p>
<p><a href="https://github.com/meteor/todos/blob/master/imports/ui/components/client/todos-item.tests.js" target="_blank" rel="external"><code>imports/ui/components/client/todos-item.tests.js</code></a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-env mocha */</span></span><br><span class="line"><span class="comment">/* eslint-disable func-names, prefer-arrow-callback */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Factory &#125; <span class="keyword">from</span> <span class="string">'meteor/dburles:factory'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; chai &#125; <span class="keyword">from</span> <span class="string">'meteor/practicalmeteor:chai'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Template &#125; <span class="keyword">from</span> <span class="string">'meteor/templating'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; $ &#125; <span class="keyword">from</span> <span class="string">'meteor/jquery'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Todos &#125; <span class="keyword">from</span> <span class="string">'../../../api/todos/todos'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; withRenderedTemplate &#125; <span class="keyword">from</span> <span class="string">'../../test-helpers.js'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'../todos-item.js'</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'Todos_item'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  beforeEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Template.registerHelper(<span class="string">'_'</span>, key =&gt; key);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  afterEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Template.deregisterHelper(<span class="string">'_'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  it(<span class="string">'renders correctly with simple data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> todo = Factory.build(<span class="string">'todo'</span>, &#123; <span class="attr">checked</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> data = &#123;</span><br><span class="line">      <span class="attr">todo</span>: Todos._transform(todo),</span><br><span class="line">      <span class="attr">onEditingChange</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    withRenderedTemplate(<span class="string">'Todos_item'</span>, data, el =&gt; &#123;</span><br><span class="line">      chai.assert.equal($(el).find(<span class="string">'input[type=text]'</span>).val(), todo.text);</span><br><span class="line">      chai.assert.equal($(el).find(<span class="string">'.list-item.checked'</span>).length, <span class="number">0</span>);</span><br><span class="line">      chai.assert.equal($(el).find(<span class="string">'.list-item.editing'</span>).length, <span class="number">0</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Of particular interest in this test is the following:</p>
<p>이 테스트에서 특히 중요한 점은 다음과 같습니다.</p>
<h4 id="unit-test-importing">Importing</h4>

<p>임포팅</p>
<p>When we run our app in test mode, only our test files will be eagerly loaded. In particular, this means that in order to use our templates, we need to import them! In this test, we import <code>todos-item.js</code>, which itself imports <code>todos.html</code> (yes, you do need to import the HTML files of your Blaze templates!)</p>
<p>테스트 모드에서 앱을 실행하면 테스트 파일 만 열심히로드됩니다. 특히 템플릿을 사용하려면 템플릿을 가져와야합니다. 이 테스트에서는<code>todos-item.js</code> 파일을 가져옵니다.이 파일은<code>todos.html</code> 파일을 가져옵니다 (예, Blaze 템플릿의 HTML 파일을 가져와야합니다!).</p>
<h4 id="unit-test-stubbing">Stubbing</h4>

<p>스터빙</p>
<p>To be a unit test, we must stub out the dependencies of the module. In this case, thanks to the way we’ve isolated our code into a reusable component, there’s not much to do; principally we need to stub out the <code>{{_}}</code> helper that’s created by the <a href="ui-ux.html#i18n"><code>tap:i18n</code></a> system. Note that we stub it out in a <code>beforeEach</code> and restore it the <code>afterEach</code>.</p>
<p>단위 테스트가 되려면 모듈의 종속성을 철저히 분석해야합니다. 이 경우 코드를 재사용 가능한 구성 요소로 분리 한 덕분에별로 할 일이 없습니다. 기본적으로 우리는 <a href="ui-ux.html#i18n"><code>tap:i18n</code></a> 시스템에 의해 생성 된<code>{{_}}</code> 헬퍼를 작성해야 합니다. 우리가 <code>beforeEach</code> 에서 그것을 스텁하고 <code>afterEach</code> 를 복원한다는 것을 주목하십시오.</p>
<p>If you’re testing code that makes use of globals, you’ll need to import those globals. For instance if you have a global <code>Todos</code> collection and are testing this file:</p>
<p>전역 변수를 사용하는 코드를 테스트하는 경우 해당 전역 변수를 가져와야합니다. 예를 들어, 전역<code>Todos</code> 콜렉션을 가지고 있고이 파일을 테스트하고 있다면 :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// logging.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logTodos</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(Todos.findOne());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>then you’ll need to import <code>Todos</code> both in that file and in the test:</p>
<p>그 파일과 테스트에서 <code>Todos</code> 파일을 모두 가져와야 합니다 :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// logging.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; Todos &#125; <span class="keyword">from</span> <span class="string">'./todos.js'</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logTodos</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(Todos.findOne());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// logging.test.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; Todos &#125; <span class="keyword">from</span> <span class="string">'./todos.js'</span></span><br><span class="line">Todos.findOne = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">text</span>: <span class="string">"write a guide"</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; logTodos &#125; <span class="keyword">from</span> <span class="string">'./logging.js'</span></span><br><span class="line"><span class="comment">// then test logTodos</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h4 id="unit-test-data">Creating data</h4>

<p>데이터 생성</p>
<p>We can use the <a href="#test-data">Factory package’s</a> <code>.build()</code> API to create a test document without inserting it into any collection. As we’ve been careful not to call out to any collections directly in the reusable component, we can pass the built <code>todo</code> document directly into the template.</p>
<p><a href="#test-data">Factory 패키지의</a> <code>.build()</code>API를 사용하여 테스트 문서를 어떤 콜렉션에도 삽입하지 않고 생성 할 수 있습니다. 재사용 가능한 컴포넌트에서 직접 콜렉션을 호출하지 않도록주의 했으므로 빌드 된<code>todo</code> 문서를 템플릿에 직접 전달할 수 있습니다.</p>
<h3 id="simple-react-unit-test">A simple React unit test</h3>

<p>간단한 React 유닛 테스트</p>
<p>We can also apply the same structure to testing React components and recommend the <a href="https://github.com/airbnb/enzyme" target="_blank" rel="external">Enzyme</a> package, which simulates a React component’s environment and allows you to query it using CSS selectors. A larger suite of tests is available in the <a href="https://github.com/meteor/todos/tree/react" target="_blank" rel="external">react branch of the Todos app</a>, but let’s look at a simple example for now:</p>
<p>우리는 React 구성 요소를 테스트하는 데에도 동일한 구조를 적용 할 수 있으며 <a href="https://github.com/airbnb/enzyme" target="_blank" rel="external">Enzyme</a> 패키지를 추천합니다. 이 패키지는 React 구성 요소의 환경을 시뮬레이트하고 CSS 선택기를 사용하여 쿼리 할 수 있도록합니다. 더 큰 테스트 세트는 <a href="https://github.com/meteor/todos/tree/react" target="_blank" rel="external">Todos 앱의 react 브랜치</a>에서 사용할 수 있지만 지금은 간단한 예를 살펴 보겠습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Factory &#125; <span class="keyword">from</span> <span class="string">'meteor/dburles:factory'</span>;</span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; shallow &#125; <span class="keyword">from</span> <span class="string">'enzyme'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; chai &#125; <span class="keyword">from</span> <span class="string">'meteor/practicalmeteor:chai'</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">'./TodoItem.jsx'</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'TodoItem'</span>, () =&gt; &#123;</span><br><span class="line">  it(<span class="string">'should render'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> todo = Factory.build(<span class="string">'todo'</span>, &#123; <span class="attr">text</span>: <span class="string">'testing'</span>, <span class="attr">checked</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> item = shallow(&lt;TodoItem todo=&#123;todo&#125; /&gt;);</span><br><span class="line">    chai.assert(item.hasClass('list-item'));</span><br><span class="line">    chai.assert(!item.hasClass('checked'));</span><br><span class="line">    chai.assert.equal(item.find('.editing').length, 0);</span><br><span class="line">    chai.assert.equal(item.find('input[type="text"]').prop('defaultValue'), 'testing');</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The test is slightly simpler than the Blaze version above because the React sample app is not internationalized. Otherwise, it’s conceptually identical. We use Enzyme’s <code>shallow</code> function to render the <code>TodoItem</code> component, and the resulting object to query the document, and also to simulate user interactions. And here’s an example of simulating a user checking the todo item:</p>
<p>React 샘플 앱이 국제화되지 않았기 때문에 테스트는 위의 Blaze 버전보다 약간 간단합니다. 그렇지 않으면 개념적으로 동일합니다. 우리는 Enzyme의 <code>shallow</code> 함수를 사용하여 <code>TodoItem</code> 컴포넌트를 렌더링하고 결과 객체는 문서를 질의하고 사용자 상호 작용을 시뮬레이션합니다. 다음은 todo 항목을 검사하는 사용자를 시뮬레이트하는 예제입니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Factory &#125; <span class="keyword">from</span> <span class="string">'meteor/dburles:factory'</span>;</span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; shallow &#125; <span class="keyword">from</span> <span class="string">'enzyme'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; sinon &#125; <span class="keyword">from</span> <span class="string">'meteor/practicalmeteor:sinon'</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">'./TodoItem.jsx'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; setCheckedStatus &#125; <span class="keyword">from</span> <span class="string">'../../api/todos/methods.js'</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'TodoItem'</span>, () =&gt; &#123;</span><br><span class="line">  it(<span class="string">'should update status when checked'</span>, () =&gt; &#123;</span><br><span class="line">    sinon.stub(setCheckedStatus, <span class="string">'call'</span>);</span><br><span class="line">    <span class="keyword">const</span> todo = Factory.create(<span class="string">'todo'</span>, &#123; <span class="attr">checked</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> item = shallow(&lt;TodoItem todo=&#123;todo&#125; /&gt;);</span><br><span class="line"></span><br><span class="line">    item.find('input[type="checkbox"]').simulate('change', &#123;</span><br><span class="line">      target: &#123; checked: true &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    sinon.assert.calledWith(setCheckedStatus.call, &#123;</span><br><span class="line">      todoId: todo._id,</span><br><span class="line">      newCheckedStatus: true,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    setCheckedStatus.call.restore();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>In this case, the <code>TodoItem</code> component calls a <a href="/methods.html">Meteor Method</a> <code>setCheckedStatus</code> when the user clicks, but this is a unit test so there’s no server running. So we stub it out using <a href="http://sinonjs.org" target="_blank" rel="external">Sinon</a>. After we simulate the click, we verify that the stub was called with the correct arguments. Finally, we clean up the stub and restore the original method behavior.</p>
<p>이 경우,<code>TodoItem</code> 컴포넌트는 사용자가 클릭 할 때 <a href="/ methods.html">meteor 메소드</a><code>setCheckedStatus</code>를 호출하지만 이것은 단위 테스트이므로 서버가 실행되고 있지 않습니다. 그래서 우리는 <a href="http://sinonjs.org" target="_blank" rel="external">Sinon</a>을 사용하여 그것을 뽑습니다. 클릭을 시뮬레이션 한 후 올바른 인수로 스텁이 호출되었는지 확인합니다. 마지막으로 스텁을 정리하고 원래 메서드 동작을 복원합니다.</p>
<h3 id="running-unit-tests">Running unit tests</h3>

<p>단위 테스트 실행</p>
<p>To run the tests that our app defines, we run our app in <a href="#test-modes">test mode</a>:</p>
<p>앱이 정의한 테스트를 실행하기 위해 <a href="#테스트 모드">테스트 모드</a>에서 앱을 실행합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor test --driver-package practicalmeteor:mocha</span><br></pre></td></tr></table></figure>
<p>As we’ve defined a test file (<code>imports/todos/todos.tests.js</code>), what this means is that the file above will be eagerly loaded, adding the <code>&#39;builds correctly from factory&#39;</code> test to the Mocha registry.</p>
<p>테스트 파일 (<code>imports/todos/todos.tests.js</code>)을 정의 했으므로 위의 파일을 열심히로드하고<code>공장에서 정확하게 빌드합니다</code>라는 테스트를 Mocha 레지스트리에 추가합니다 .</p>
<p>To run the tests, visit <a href="http://localhost:3000" target="_blank" rel="external">http://localhost:3000</a> in your browser. This kicks off <code>practicalmeteor:mocha</code>, which runs your tests both in the browser and on the server. It displays the test results in the browser in a Mocha test reporter:</p>
<p>테스트를 실행하려면 브라우저에서 <a href="http://localhost:3000을" target="_blank" rel="external">http://localhost:3000을</a> 방문하십시오. 이것은 브라우저와 서버에서 테스트를 실행하는 <code>practicalmeteor:mocha</code>를 시작합니다. 모카 테스트 기자의 브라우저에 테스트 결과를 표시합니다.</p>
<p><img src="images/mocha-test-results.png"></p>
<p>Usually, while developing an application, it makes sense to run <code>meteor test</code> on a second port (say <code>3100</code>), while also running your main application in a separate process:</p>
<p>일반적으로 응용 프로그램을 개발하는 동안 두 번째 포트 (<code>3100</code>)에서 <code>meteor test</code> 를 실행하는 동시에 주 응용 프로그램을 별도의 프로세스로 실행하는 것이 좋습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in one terminal window</span></span><br><span class="line">meteor</span><br><span class="line"></span><br><span class="line"><span class="comment"># in another</span></span><br><span class="line">meteor <span class="built_in">test</span> --driver-package practicalmeteor:mocha --port 3100</span><br></pre></td></tr></table></figure>
<p>Then you can open two browser windows to see the app in action while also ensuring that you don’t break any tests as you make changes.</p>
<p>그런 다음 두 개의 브라우저 창을 열어 앱이 실제로 작동하는지 확인하고 변경 사항을 적용 할 때 테스트를 중단하지 않도록 할 수 있습니다.</p>
<h3 id="isolation-techniques">Isolation techniques</h3>

<p>격리 기술</p>
<p>In the <a href="#simple-blaze-unit-test">unit tests above</a> we saw a very limited example of how to isolate a module from the larger app. This is critical for proper unit testing. Some other utilities and techniques include:</p>
<ul>
<li><p>The <a href="https://atmospherejs.com/velocity/meteor-stubs" target="_blank" rel="external"><code>velocity:meteor-stubs</code></a> package, which creates simple stubs for most Meteor core objects.</p>
</li>
<li><p>Alternatively, you can also use tools like <a href="http://sinonjs.org" target="_blank" rel="external">Sinon</a> to stub things directly, as we’ll see for example in our <a href="#simple-integration-test">simple integration test</a>.</p>
</li>
<li><p>The <a href="https://atmospherejs.com/hwillson/stub-collections" target="_blank" rel="external"><code>hwillson:stub-collections</code></a> package we mentioned <a href="#mocking-the-database">above</a>.</p>
<p>위의 <a href="#simple-blaze-unit-test">단위 테스트</a> 에서 우리는 더 큰 앱에서 모듈을 분리하는 방법에 대한 매우 제한된 예를 보았습니다. 이것은 적절한 단위 테스트에 중요합니다. 다른 유틸리티 및 기법은 다음과 같습니다.</p>
<ul>
<li><p>대부분의 Meteor 코어 객체에 대해 간단한 스텁을 생성하는 <a href="https://atmospherejs.com/velocity/meteor-stubs" target="_blank" rel="external"><code>velocity:meteor-stubs</code></a> 패키지.</p>
</li>
<li><p>또는 <a href="http://sinonjs.org" target="_blank" rel="external">Sinon</a>과 같은 도구를 사용하여 직접적으로 스텁을 작성할 수도 있습니다. 예를 들어 <a href="#simple-integration-test">단순 통합 테스트</a>에서 볼 수 있습니다.</p>
</li>
<li><p><a href="#mocking-the-database">above</a> 에서 언급 한 <a href="https://atmospherejs.com/hwillson/stub-collections" target="_blank" rel="external"><code>hwillson:stub-collections</code></a> 패키지</p>
</li>
</ul>
</li>
</ul>
<p>There’s a lot of scope for better isolation and testing utilities.</p>
<p>더 나은 격리 및 테스트 유틸리티를위한 범위가 많이 있습니다.</p>
<h4 id="testing-publications">Testing publications</h4>

<p>출판물 테스트</p>
<p>Using the <a href="https://atmospherejs.com/johanbrook/publication-collector" target="_blank" rel="external"><code>johanbrook:publication-collector</code></a> package, you’re able to test individual publication’s output without needing to create a traditional subscription:</p>
<p><a href="https://atmospherejs.com/johanbrook/publication-collector" target="_blank" rel="external"><code>johanbrook:publication-collector</code></a> 패키지를 사용하면 기존 구독을 만들 필요없이 개별 발행물의 출력을 테스트 할 수 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">describe(<span class="string">'lists.public'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'sends all public lists'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Set a user id that will be provided to the publish function as `this.userId`,</span></span><br><span class="line">    <span class="comment">// in case you want to test authentication.</span></span><br><span class="line">    <span class="keyword">const</span> collector = <span class="keyword">new</span> PublicationCollector(&#123;<span class="attr">userId</span>: <span class="string">'some-id'</span>&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Collect the data published from the `lists.public` publication.</span></span><br><span class="line">    collector.collect(<span class="string">'lists.public'</span>, (collections) =&gt; &#123;</span><br><span class="line">      <span class="comment">// `collections` is a dictionary with collection names as keys,</span></span><br><span class="line">      <span class="comment">// and their published documents as values in an array.</span></span><br><span class="line">      <span class="comment">// Here, documents from the collection 'Lists' are published.</span></span><br><span class="line">      chai.assert.typeOf(collections.Lists, <span class="string">'array'</span>);</span><br><span class="line">      chai.assert.equal(collections.Lists.length, <span class="number">3</span>);</span><br><span class="line">      done();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Note that user documents – ones that you would normally query with <code>Meteor.users.find()</code> – will be available as the key <code>users</code> on the dictionary passed from a <code>PublicationCollector.collect()</code> call. See the <a href="https://github.com/johanbrook/meteor-publication-collector/blob/master/tests/publication-collector.test.js" target="_blank" rel="external">tests</a> in the package for more details.</p>
<p>사용자 문서 (보통<code>Meteor.users.find()</code>로 질의하는 사용자 문서는<code>PublicationCollector.collect()</code>호출에서 전달 된 사전의 키<code>users</code>로 사용 가능합니다. 자세한 내용은 패키지의 <a href="https://github.com/johanbrook/meteor-publication-collector/blob/master/tests/publication-collector.test.js" target="_blank" rel="external">tests</a>를 참조하십시오.</p>
<h2 id="integration-testing">Integration testing</h2>

<p>통합 테스트</p>
<p>An integration test is a test that crosses module boundaries. In the simplest case, this simply means something very similar to a unit test, where you perform your isolation around multiple modules, creating a non-singular “system under test”.</p>
<p>통합 테스트는 모듈 경계를 넘는 테스트입니다. 가장 단순한 경우, 이는 단순히 단위 테스트와 매우 유사한 의미를 가지며, 여러 모듈 주위에서 격리를 수행하여 비표준 “시스템 테스트 중”을 만듭니다.</p>
<p>Although conceptually different to unit tests, such tests typically do not need to be run any differently to unit tests and can use the same <a href="#running-unit-tests"><code>meteor test</code> mode</a> and <a href="#isolation-techniques">isolation techniques</a> as we use for unit tests.</p>
<p>단위 테스트와는 개념적으로 다르지만 일반적으로 이러한 테스트는 단위 테스트와 다르게 실행될 필요가 없으며 동일한 유성 테스트 모드 (#running-unit-tests)와 격리 기술 (#isolation- 기술)을 사용합니다.</p>
<p>However, an integration test that crosses the client-server boundary of a Meteor application (where the modules under test cross that boundary) requires a different testing infrastructure, namely Meteor’s “full app” testing mode.</p>
<p>그러나, Meteor 어플리케이션 (테스트중인 모듈이 그 경계를 넘는)의 클라이언트 - 서버 경계를 넘는 통합 테스트는 Meteor의 “전체 어플리케이션”테스트 모드와 같은 다른 테스트 인프라가 필요합니다.</p>
<p>Let’s take a look at example of both kinds of tests.</p>
<p>두 종류의 테스트에 대한 예를 살펴 보겠습니다.</p>
<h3 id="simple-integration-test">Simple integration test</h3>

<p>간단한 통합 테스트</p>
<p>Our reusable components were a natural fit for a unit test; similarly our smart components tend to require an integration test to really be exercised properly, as the job of a smart component is to bring data together and supply it to a reusable component.</p>
<p>재사용 가능한 구성 요소는 단위 테스트를위한 자연스러운 적합성이었습니다. 마찬가지로 스마트 구성 요소의 작업은 데이터를 모아 재사용 가능한 구성 요소에 공급하기 때문에 스마트 구성 요소는 실제로 제대로 작동하려면 통합 테스트가 필요합니다.</p>
<p>In the <a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> example app, we have an integration test for the <code>Lists_show_page</code> smart component. This test simply ensures that when the correct data is present in the database, the template renders correctly – that it is gathering the correct data as we expect. It isolates the rendering tree from the more complex data subscription part of the Meteor stack. If we wanted to test that the subscription side of things was working in concert with the smart component, we’d need to write a <a href="#full-app-integration-test">full app integration test</a>.</p>
<p><a href="https://github.com/meteor/todos/blob/master/imports/ui/components/client/todos-item.tests.js" target="_blank" rel="external"><code>imports/ui/components/client/todos-item.tests.js</code></a>:</p>
<p><a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> 예제 애플리케이션에는 <code>Lists_show_page</code> 스마트 컴포넌트에 대한 통합 테스트가 있습니다. 이 테스트는 데이터베이스에 올바른 데이터가있을 때 템플릿이 올바르게 렌더링되도록합니다. 예상 한대로 올바른 데이터를 수집합니다. Meteor 스택의 더 복잡한 데이터 구독 부분에서 렌더링 트리를 분리합니다. 구독 항목이 스마트 구성 요소와 함께 작동하는지 테스트하려는 경우 <a href="#full-app-integration-test">전체 앱 통합 테스트</a>를 작성해야합니다.</p>
<p><a href="https://github.com/meteor/todos/blob/master/imports/ui/components/client/todos-item.tests.js" target="_blank" rel="external"><code>imports/ui/components/client/todos-item.tests.js</code></a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-env mocha */</span></span><br><span class="line"><span class="comment">/* eslint-disable func-names, prefer-arrow-callback */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Meteor &#125; <span class="keyword">from</span> <span class="string">'meteor/meteor'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Factory &#125; <span class="keyword">from</span> <span class="string">'meteor/dburles:factory'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Random &#125; <span class="keyword">from</span> <span class="string">'meteor/random'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; chai &#125; <span class="keyword">from</span> <span class="string">'meteor/practicalmeteor:chai'</span>;</span><br><span class="line"><span class="keyword">import</span> StubCollections <span class="keyword">from</span> <span class="string">'meteor/hwillson:stub-collections'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Template &#125; <span class="keyword">from</span> <span class="string">'meteor/templating'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; _ &#125; <span class="keyword">from</span> <span class="string">'meteor/underscore'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; $ &#125; <span class="keyword">from</span> <span class="string">'meteor/jquery'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FlowRouter &#125; <span class="keyword">from</span> <span class="string">'meteor/kadira:flow-router'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; sinon &#125; <span class="keyword">from</span> <span class="string">'meteor/practicalmeteor:sinon'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; withRenderedTemplate &#125; <span class="keyword">from</span> <span class="string">'../../test-helpers.js'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'../lists-show-page.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Todos &#125; <span class="keyword">from</span> <span class="string">'../../../api/todos/todos.js'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Lists &#125; <span class="keyword">from</span> <span class="string">'../../../api/lists/lists.js'</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'Lists_show_page'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> listId = Random.id();</span><br><span class="line"></span><br><span class="line">  beforeEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    StubCollections.stub([Todos, Lists]);</span><br><span class="line">    Template.registerHelper(<span class="string">'_'</span>, key =&gt; key);</span><br><span class="line">    sinon.stub(FlowRouter, <span class="string">'getParam'</span>, () =&gt; listId);</span><br><span class="line">    sinon.stub(Meteor, <span class="string">'subscribe'</span>, () =&gt; (&#123;</span><br><span class="line">      <span class="attr">subscriptionId</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">ready</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="literal">true</span>,</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  afterEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    StubCollections.restore();</span><br><span class="line">    Template.deregisterHelper(<span class="string">'_'</span>);</span><br><span class="line">    FlowRouter.getParam.restore();</span><br><span class="line">    Meteor.subscribe.restore();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  it(<span class="string">'renders correctly with simple data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Factory.create(<span class="string">'list'</span>, &#123; <span class="attr">_id</span>: listId &#125;);</span><br><span class="line">    <span class="keyword">const</span> timestamp = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">const</span> todos = _.times(<span class="number">3</span>, i =&gt; Factory.create(<span class="string">'todo'</span>, &#123;</span><br><span class="line">      listId,</span><br><span class="line">      <span class="attr">createdAt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(timestamp - (<span class="number">3</span> - i)),</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    withRenderedTemplate(<span class="string">'Lists_show_page'</span>, &#123;&#125;, el =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> todosText = todos.map(<span class="function"><span class="params">t</span> =&gt;</span> t.text).reverse();</span><br><span class="line">      <span class="keyword">const</span> renderedText = $(el).find(<span class="string">'.list-items input[type=text]'</span>)</span><br><span class="line">        .map(<span class="function">(<span class="params">i, e</span>) =&gt;</span> $(e).val())</span><br><span class="line">        .toArray();</span><br><span class="line">      chai.assert.deepEqual(renderedText, todosText);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Of particular interest in this test is the following:</p>
<p>이 테스트에서 특히 중요한 점은 다음과 같습니다.</p>
<h4 id="simple-integration-test-importing">Importing</h4>

<p>임포팅</p>
<p>As we’ll run this test in the same way that we did our unit test, we need to <code>import</code> the relevant modules under test in the same way that we <a href="#simple-integration-test-importing">did in the unit test</a>.</p>
<p>우리가 단위 테스트를 한 것과 같은 방식으로이 테스트를 실행할 것이므로, 우리는 <a href="#simple-integration-test-importing">단위 테스트에서 했던</a> 것과 같은 방법으로 테스트중인 관련 모듈을 가져와야합니다.</p>
<h4 id="simple-integration-test-stubbing">Stubbing</h4>

<p>스터빙</p>
<p>As the system under test in our integration test has a larger surface area, we need to stub out a few more points of integration with the rest of the stack. Of particular interest here is our use of the <a href="#mocking-the-database"><code>hwillson:stub-collections</code></a> package and of <a href="http://sinonjs.org" target="_blank" rel="external">Sinon</a> to stub out Flow Router and our Subscription.</p>
<p>통합 테스트에서 테스트중인 시스템의 표면적이 더 크기 때문에 스택의 나머지 부분과 더 많은 통합 지점을 작성해야합니다. 여기서 특히 흥미로운 것은 <a href="#mocking-the-database"><code>hwillson:stub-collections</code></a> 패키지와 <a href="http://sinonjs.org" target="_blank" rel="external">Sinon</a>을 사용하여 플로우 라우터와 서브 스크립 션을 스텁링하는 것입니다.</p>
<h4 id="simple-integration-test-data">Creating data</h4>

<p>데이터 생성</p>
<p>In this test, we used <a href="#test-data">Factory package’s</a> <code>.create()</code> API, which inserts data into the real collection. However, as we’ve proxied all of the <code>Todos</code> and <code>Lists</code> collection methods onto a local collection (this is what <code>hwillson:stub-collections</code> is doing), we won’t run into any problems with trying to perform inserts from the client.</p>
<p>이 테스트에서는 <a href="#test-data">Factory 패키지의</a> <code>.create()</code> API를 사용하여 데이터를 실제 컬렉션에 삽입했습니다. 그러나, <code>Todos</code> 와 <code>Lists</code> 콜렉션 메소드를 로컬 콜렉션에 프로비저닝 했으므로 (<code>hwillson:stub-collections</code>이 수행하는 것입니다.), 우리는 수행하려고 시도 할 때 어떤 문제도 일으키지 않을 것입니다 클라이언트에서 삽입합니다.</p>
<p>This integration test can be run the exact same way as we ran <a href="#running-unit-tests">unit tests above</a>.</p>
<p>이 통합 테스트는 <a href="#running-unit-tests">위의 단위 테스트</a> 와 동일한 방식으로 실행될 수 있습니다.</p>
<h3 id="full-app-integration-test">Full-app integration test</h3>

<p>전체 앱 통합 테스트</p>
<p>In the <a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> example application, we have a integration test which ensures that we see the full contents of a list when we route to it, which demonstrates a few techniques of integration tests.</p>
<p><a href="https://github.com/meteor/todos/blob/master/imports/startup/client/routes.app-test.js" target="_blank" rel="external"><code>imports/startup/client/routes.app-test.js</code></a>:</p>
<p><a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> 예제 애플리케이션에는 라우팅 할 때 목록의 전체 내용을 볼 수있는 통합 테스트가 있습니다. 이 테스트는 몇 가지 통합 기술을 보여줍니다.</p>
<p><a href="https://github.com/meteor/todos/blob/master/imports/startup/client/routes.app-test.js" target="_blank" rel="external"><code>imports/startup/client/routes.app-test.js</code></a> :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-env mocha */</span></span><br><span class="line"><span class="comment">/* eslint-disable func-names, prefer-arrow-callback */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Meteor &#125; <span class="keyword">from</span> <span class="string">'meteor/meteor'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Tracker &#125; <span class="keyword">from</span> <span class="string">'meteor/tracker'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; DDP &#125; <span class="keyword">from</span> <span class="string">'meteor/ddp-client'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FlowRouter &#125; <span class="keyword">from</span> <span class="string">'meteor/kadira:flow-router'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; assert &#125; <span class="keyword">from</span> <span class="string">'meteor/practicalmeteor:chai'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="built_in">Promise</span> &#125; <span class="keyword">from</span> <span class="string">'meteor/promise'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; $ &#125; <span class="keyword">from</span> <span class="string">'meteor/jquery'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; denodeify &#125; <span class="keyword">from</span> <span class="string">'../../utils/denodeify'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; generateData &#125; <span class="keyword">from</span> <span class="string">'./../../api/generate-data.app-tests.js'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Lists &#125; <span class="keyword">from</span> <span class="string">'../../api/lists/lists.js'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Todos &#125; <span class="keyword">from</span> <span class="string">'../../api/todos/todos.js'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Utility -- returns a promise which resolves when all subscriptions are done</span></span><br><span class="line"><span class="keyword">const</span> waitForSubscriptions = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> poll = Meteor.setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (DDP._allSubscriptionsReady()) &#123;</span><br><span class="line">      Meteor.clearInterval(poll);</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">200</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Tracker.afterFlush runs code when all consequent of a tracker based change</span></span><br><span class="line"><span class="comment">//   (such as a route change) have occured. This makes it a promise.</span></span><br><span class="line"><span class="keyword">const</span> afterFlushPromise = denodeify(Tracker.afterFlush);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Meteor.isClient) &#123;</span><br><span class="line">  describe(<span class="string">'data available when routed'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="comment">// First, ensure the data that we expect is loaded on the server</span></span><br><span class="line">    <span class="comment">//   Then, route the app to the homepage</span></span><br><span class="line">    beforeEach(<span class="function"><span class="params">()</span> =&gt;</span> generateData()</span><br><span class="line">      .then(<span class="function"><span class="params">()</span> =&gt;</span> FlowRouter.go(<span class="string">'/'</span>))</span><br><span class="line">      .then(waitForSubscriptions)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    describe(<span class="string">'when logged out'</span>, () =&gt; &#123;</span><br><span class="line">      it(<span class="string">'has all public lists at homepage'</span>, () =&gt; &#123;</span><br><span class="line">        assert.equal(Lists.find().count(), <span class="number">3</span>);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      it(<span class="string">'renders the correct list when routed to'</span>, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> list = Lists.findOne();</span><br><span class="line">        FlowRouter.go(<span class="string">'Lists.show'</span>, &#123; <span class="attr">_id</span>: list._id &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> afterFlushPromise()</span><br><span class="line">          .then(waitForSubscriptions)</span><br><span class="line">          .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            assert.equal($(<span class="string">'.title-wrapper'</span>).html(), list.name);</span><br><span class="line">            assert.equal(Todos.find(&#123; <span class="attr">listId</span>: list._id &#125;).count(), <span class="number">3</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Of note here:</p>
<ul>
<li><p>Before running, each test sets up the data it needs using the <code>generateData</code> helper (see <a href="#creating-integration-test-data">the section on creating integration test data</a> for more detail) then goes to the homepage.</p>
</li>
<li><p>Although Flow Router doesn’t take a done callback, we can use <code>Tracker.afterFlush</code> to wait for all its reactive consequences to occur.</p>
</li>
<li><p>Here we wrote a little utility (which could be abstracted into a general package) to wait for all the subscriptions which are created by the route change (the <code>todos.inList</code> subscription in this case) to become ready before checking their data.</p>
<p>여기서 주목할 사항 :</p>
<ul>
<li><p>실행하기 전에 각 테스트는 generateData 헬퍼를 사용하여 필요한 데이터를 설정합니다 (자세한 내용은 <a href="#creating-integration-test-data">integration testing data 작성에 관한 섹션</a> 참조). 그런 다음 홈페이지로 이동합니다.</p>
</li>
<li><p>플로우 라우터는 완료 콜백을하지 않지만, 우리는 <code>Tracker.afterFlush</code> 를 사용하여 모든 반응 결과가 발생할 때까지 기다릴 수 있습니다.</p>
</li>
<li><p>여기서 우리는 라우트 변경 (이 경우 <code>todos.inList</code> 구독)에 의해 생성 된 모든 구독이 그들의 데이터를 검사하기 전에 준비 될 때까지 기다릴 수있는 작은 유틸리티 (일반 패키지로 추상화 될 수 있음)를 작성했습니다.</p>
</li>
</ul>
<h3 id="running-full-app-tests">Running full-app tests</h3>

<p>전체 앱 테스트 실행</p>
</li>
</ul>
<p>To run the <a href="#test-modes">full-app tests</a> in our application, we run:</p>
<p>응용 프로그램에서 <a href="#test-modes">full-app tests</a> 를 실행하기 위해 다음을 실행합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor test --full-app --driver-package practicalmeteor:mocha</span><br></pre></td></tr></table></figure>
<p>When we connect to the test instance in a browser, we want to render a testing UI rather than our app UI, so the <code>mocha-web-reporter</code> package will hide any UI of our application and overlay it with its own. However the app continues to behave as normal, so we are able to route around and check the correct data is loaded.</p>
<p>우리가 브라우저에서 테스트 인스턴스에 연결할 때, 우리는 우리의 어플리케이션 UI가 아닌 테스팅 UI를 렌더링하기를 원한다. 그래서 <code>mocha-web-reporter</code> 패키지는 우리 어플리케이션의 UI를 숨기고 그것을 자신의 것으로 오버레이 할 것이다. 그러나 앱은 계속 정상적으로 작동하므로 올바른 경로로 데이터가로드되었는지 확인할 수 있습니다.</p>
<h3 id="creating-integration-test-data">Creating data</h3>

<p>데이터 작성</p>
<p>To create test data in full-app test mode, it usually makes sense to create some special test methods which we can call from the client side. Usually when testing a full app, we want to make sure the publications are sending through the correct data (as we do in this test), and so it’s not sufficient to stub out the collections and place synthetic data in them. Instead we’ll want to actually create data on the server and let it be published.</p>
<p>Full-app 테스트 모드로 테스트 데이터를 생성하기 위해서는 클라이언트 측에서 호출 할 수있는 몇 가지 특별한 테스트 메소드를 만드는 것이 일반적입니다. 일반적으로 전체 응용 프로그램을 테스트 할 때 우리는 해당 발행물이 올바른 데이터 (이 테스트에서와 같이)를 통해 전송되는지 확인하기를 원합니다. 따라서 콜렉션을 스텁링하고 합성 데이터를 배치하는 것으로는 충분하지 않습니다. 대신 실제로 서버에 데이터를 만들고 게시하도록 할 것입니다.</p>
<p>Similar to the way we cleared the database using a method in the <code>beforeEach</code> in the <a href="#test-data">test data</a> section above, we can call a method to do that before running our tests. In the case of our routing tests, we’ve used a file called <a href="https://github.com/meteor/todos/blob/master/imports/api/generate-data.app-tests.js" target="_blank" rel="external"><code>imports/api/generate-data.app-tests.js</code></a> which defines this method (and will only be loaded in full app test mode, so is not available in general!):</p>
<p>위의 <a href="#test-data">test data</a> 섹션의 <code>beforeEach</code> 메소드를 사용하여 데이터베이스를 지우는 방법과 비슷하게 테스트를 실행하기 전에 수행 할 메소드를 호출 할 수 있습니다. 라우팅 테스트의 경우 이 메소드를 정의의한 <a href="https://github.com/meteor/todos/blob/master/imports/api/generate-data.app-tests.js" target="_blank" rel="external"><code>imports/api/generate-data.app-tests.js</code></a> 파일을 사용했습니다. (전체 앱 테스트 모드에서만 로드되므로 일반적으로 사용할 수 없습니다).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This file will be auto-imported in the app-test context,</span></span><br><span class="line"><span class="comment">// ensuring the method is always available</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Meteor &#125; <span class="keyword">from</span> <span class="string">'meteor/meteor'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Factory &#125; <span class="keyword">from</span> <span class="string">'meteor/dburles:factory'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; resetDatabase &#125; <span class="keyword">from</span> <span class="string">'meteor/xolvio:cleaner'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Random &#125; <span class="keyword">from</span> <span class="string">'meteor/random'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; _ &#125; <span class="keyword">from</span> <span class="string">'meteor/underscore'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; denodeify &#125; <span class="keyword">from</span> <span class="string">'../utils/denodeify'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> createList = <span class="function">(<span class="params">userId</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> list = Factory.create(<span class="string">'list'</span>, &#123; userId &#125;);</span><br><span class="line">  _.times(<span class="number">3</span>, () =&gt; Factory.create(<span class="string">'todo'</span>, &#123; <span class="attr">listId</span>: list._id &#125;));</span><br><span class="line">  <span class="keyword">return</span> list;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Remember to double check this is a test-only file before</span></span><br><span class="line"><span class="comment">// adding a method like this!</span></span><br><span class="line">Meteor.methods(&#123;</span><br><span class="line">  generateFixtures() &#123;</span><br><span class="line">    resetDatabase();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create 3 public lists</span></span><br><span class="line">    _.times(<span class="number">3</span>, () =&gt; createList());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create 3 private lists</span></span><br><span class="line">    _.times(<span class="number">3</span>, () =&gt; createList(Random.id()));</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> generateData;</span><br><span class="line"><span class="keyword">if</span> (Meteor.isClient) &#123;</span><br><span class="line">  <span class="comment">// Create a second connection to the server to use to call</span></span><br><span class="line">  <span class="comment">// test data methods. We do this so there's no contention</span></span><br><span class="line">  <span class="comment">// with the currently tested user's connection.</span></span><br><span class="line">  <span class="keyword">const</span> testConnection = Meteor.connect(Meteor.absoluteUrl());</span><br><span class="line"></span><br><span class="line">  generateData = denodeify(<span class="function">(<span class="params">cb</span>) =&gt;</span> &#123;</span><br><span class="line">    testConnection.call(<span class="string">'generateFixtures'</span>, cb);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; generateData &#125;;</span><br></pre></td></tr></table></figure>
<p>Note that we’ve exported a client-side symbol <code>generateData</code> which is a promisified version of the method call, which makes it simpler to use this sequentially in tests.</p>
<p>우리는 메소드 호출의 promisified 버전 인 클라이언트 측 심볼<code>generateData</code>를 내보냈습니다. 이것은 테스트에서 이것을 순차적으로 사용하기 쉽게 만듭니다.</p>
<p>Also of note is the way we use a second DDP connection to the server in order to send these test “control” method calls.</p>
<p>또한이 테스트 “control” 메소드 호출을 보내기 위해 서버에 두 번째 DDP 연결을 사용하는 방법이 있습니다.</p>
<h2 id="acceptance-testing">Acceptance testing</h2>

<p>수락 테스트</p>
<p>Acceptance testing is the process of taking an unmodified version of our application and testing it from the “outside” to make sure it behaves in a way we expect. Typically if an app passes acceptance tests, we have done our job properly from a product perspective.</p>
<p>수락 테스트는 응용 프로그램의 수정되지 않은 버전을 가져 와서 “외부”에서 테스트하여 우리가 기대하는대로 작동하는지 확인하는 프로세스입니다. 일반적으로 앱이 수락 테스트를 통과하면 Google은 제품 관점에서 올바르게 작업을 수행합니다.</p>
<p>As acceptance tests test the behavior of the application in a full browser context in a generic way, there are a range of tools that you can use to specify and run such tests. In this guide we’ll demonstrate using <a href="https://chimp.readme.io" target="_blank" rel="external">Chimp</a>, an acceptance testing tool with a few neat Meteor-specific features that makes it easy to use.</p>
<p>수락 테스트는 일반적인 브라우저 컨텍스트에서 응용 프로그램의 동작을 일반적인 방식으로 테스트하므로 이러한 테스트를 지정하고 실행하는 데 사용할 수있는 다양한 도구가 있습니다. 이 가이드에서는 사용하기 쉽도록 몇 가지 깔끔한 유성 관련 기능이있는 수용 테스트 도구 인 <a href="https://chimp.readme.io" target="_blank" rel="external">Chimp</a>를 사용하여 시연합니다.</p>
<p>Chimp requires node version 4 or 5. You can check your node version by running:</p>
<p>Chimp는 노드 버전 4 또는 5가 필요합니다. 다음을 실행하여 노드 버전을 확인할 수 있습니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure>
<p>You can install version 4 from <a href="https://nodejs.org/en/download/" target="_blank" rel="external">nodejs.org</a> or version 5 with <code>brew install node</code>. Then we can install the Chimp tool globally using:</p>
<p><a href="https://nodejs.org/en/download/" target="_blank" rel="external">nodejs.org</a> 또는 버전 5와 함께 버전 4를 ‘brew install node’와 함께 설치할 수 있습니다. 그런 다음 우리는 Chimp 도구를 다음을 사용하여 전 세계적으로 설치할 수 있습니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global chimp</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note that you can also install Chimp as a <code>devDependency</code> in your <code>package.json</code> but you may run into problems deploying your application as it includes binary dependencies. You can avoid such problems by running <code>meteor npm prune</code> to remove non-production dependencies before deploying.</p>
<p>Chimp를 <code>devDependency</code> 로 <code>package.json</code> 에 설치할 수도 있지만 바이너리 의존성을 포함하고 있기 때문에 응용 프로그램을 배포 할 때 문제가 발생할 수 있습니다. <code>meteor npm prune</code>을 실행하여 배포하기 전에 비 프로덕션 종속성을 제거함으로써 이러한 문제를 피할 수 있습니다.</p>
</blockquote>
<p>Chimp has a variety of options for setting it up, but we can add some npm scripts which will run the currently tests we define in Chimp’s two main modes. We can add them to our <code>package.json</code>:</p>
<p>Chimp에는 다양한 설정 옵션이 있지만 Chimp의 두 가지 기본 모드에서 정의한 현재 테스트를 실행할 npm 스크립트를 추가 할 수 있습니다. 우리는 그것들을 <code>package.json</code>에 추가 할 수 있습니다 :</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"chimp-watch"</span>: <span class="string">"chimp --ddp=http://localhost:3000 --watch --mocha --path=tests"</span>,</span><br><span class="line">    <span class="attr">"chimp-test"</span>: <span class="string">"chimp --mocha --path=tests"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Chimp will now look in the <code>tests/</code> directory (otherwise ignored by the Meteor tool) for files in which you define acceptance tests. In the <a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> example app, we define a simple test that ensures we can click the “create list” button.</p>
<p><a href="https://github.com/meteor/todos/blob/master/tests/lists.js" target="_blank" rel="external"><code>tests/lists.js</code></a>:</p>
<p>Chimp는 이제 수락 테스트를 정의하는 파일에 대해<code>tests/</code>디렉토리 (Meteor 도구로 무시되는 파일)에서 찾습니다. <a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos</a> 예제 앱에서는 “목록 만들기”버튼을 클릭 할 수있는 간단한 테스트를 정의합니다.</p>
<p><a href="https://github.com/meteor/todos/blob/master/tests/lists.js" target="_blank" rel="external"><code>tests/lists.js</code></a> :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-env mocha */</span></span><br><span class="line"><span class="comment">/* eslint-disable func-names, prefer-arrow-callback */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// These are Chimp globals</span></span><br><span class="line"><span class="comment">/* globals browser assert server */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countLists</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  browser.waitForExist(<span class="string">'.list-todo'</span>);</span><br><span class="line">  <span class="keyword">const</span> elements = browser.elements(<span class="string">'.list-todo'</span>);</span><br><span class="line">  <span class="keyword">return</span> elements.value.length;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'list ui'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  beforeEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    browser.url(<span class="string">'http://localhost:3000'</span>);</span><br><span class="line">    server.call(<span class="string">'generateFixtures'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  it(<span class="string">'can create a list @watch'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> initialCount = countLists();</span><br><span class="line"></span><br><span class="line">    browser.click(<span class="string">'.js-new-list'</span>);</span><br><span class="line"></span><br><span class="line">    assert.equal(countLists(), initialCount + <span class="number">1</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="running-acceptance-tests">Running acceptance tests</h3>

<p>수락 테스트 실행</p>
<p>To run acceptance tests, we simply need to start our Meteor app as usual, and point Chimp at it.</p>
<p>수락 테스트를 실행하려면 평소와 같이 Meteor 앱을 시작하고 Chimp를 지정하기 만하면됩니다.</p>
<p>In one terminal, we can do:</p>
<p>터미널에서 다음을 수행 할 수 있습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor</span><br></pre></td></tr></table></figure>
<p>In another:</p>
<p>다른 방법으로:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor npm run chimp-watch</span><br></pre></td></tr></table></figure>
<p>The <code>chimp-watch</code> command will then run the test in a browser, and continue to re-run it as we change the test or the application. (Note that the test assumes we are running the app on port <code>3000</code>).</p>
<p><code>chimp-watch</code> 명령은 브라우저에서 테스트를 실행하고 테스트 나 어플리케이션을 변경할 때 계속 실행합니다. (이 테스트에서는 우리가 포트 <code>3000</code> 에서 앱을 실행한다고 가정합니다).</p>
<p>Thus it’s a good way to develop the test—this is why chimp has a feature where we mark tests with a <code>@watch</code> in the name to call out the tests we want to work on (running our entire acceptance test suite can be time consuming in a large application).</p>
<p>따라서 테스트를 개발하는 좋은 방법입니다 — 이것이 Chimp가 우리가 작업하고자하는 테스트를 불러 내기 위해 이름에 <code>@watch</code> 라는 테스트를 표시하는 기능을 가지고있는 이유입니다 (우리의 전체 수용 테스트 스위트를 실행할 수 있습니다 대규모 응용 프로그램에서 시간이 많이 소요됨).</p>
<p>The <code>chimp-test</code> command will run all of the tests <em>once only</em> and is good for testing that our suite passes, either as a manual step, or as part of a <a href="#ci">continuous integration</a> process.</p>
<p><code>chimp-test</code> 명령은 모든 테스트를 <em>한번만</em> 수행 할 것이고 우리 스위트가 수동 단계 또는 <a href="#ci">지속적인 통합</a> 프로세스의 일부로 통과하는 테스트에 유용 할 것입니다.</p>
<h3 id="creating-acceptance-test-data">Creating data</h3>

<p>데이터 작성</p>
<p>Although we can run the acceptance test against our “pure” Meteor app, as we’ve done above, it often makes sense to start our meteor server with a special test driver, <code>tmeasday:acceptance-test-driver</code>. (You’ll need to <code>meteor add</code> it to your app):</p>
<p>우리가 위에서 한 것처럼 “순수한” Meteor 앱에 대한 수용 테스트를 실행할 수 있지만 특별한 테스트 드라이버 인 <code>tmeasday:acceptance-test-driver</code> 를 사용하여 유성 서버를 시작하는 것이 좋습니다. (앱에 <code>meteor add</code> 해야합니다.)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor test --full-app --driver-package tmeasday:acceptance-test-driver</span><br></pre></td></tr></table></figure>
<p>The advantage of running our acceptance test suite pointed at an app that runs in full app test mode is that all of the <a href="#creating-integration-test-data">data generating methods</a> that we’ve created remain available. Otherwise the <code>acceptance-test-driver</code> does nothing.</p>
<p>전체 앱 테스트 모드에서 실행되는 앱에서 가리키는 수용 테스트 스위트를 실행하면 얻는 <a href="#creating-integration-test-data">데이터 생성 방법</a>이 모두 사용 가능하다는 장점이 있습니다. 그렇지 않으면 <code>acceptance-test-driver</code> 는 아무것도하지 않습니다.</p>
<p>In Chimp tests, you have a DDP connection to the server available on the <code>server</code> variable. You can thus use <code>server.call()</code> (which is wrapped to be synchronous in Chimp tests) to call these methods. This is a convenient way to share data preparation code between acceptance and integration tests.</p>
<p>Chimp 테스트에서는 <code>server</code> 변수에서 사용할 수있는 서버에 대한 DDP 연결이 있습니다. 따라서 chimp 테스트에서 동기식으로 랩핑 된 <code>server.call()</code>을 사용하여 이 메소드를 호출 할 수있습니다. 이것은 수용 및 통합 테스트간에 데이터 준비 코드를 공유하는 편리한 방법입니다.</p>
<h2 id="ci">Continuous Integration</h2>

<p>지속적인 통합</p>
<p>Continuous integration testing is the process of running tests on every commit of your project.</p>
<p>지속적인 통합 테스트는 프로젝트의 모든 커밋에 대해 테스트를 실행하는 프로세스입니다.</p>
<p>There are two principal ways to do it: on the developer’s machine before allowing them to push code to the central repository, and on a dedicated CI server after each push. Both techniques are useful, and both require running tests in a commandline-only fashion.</p>
<p>이를 수행하는 주요한 두 가지 방법이 있습니다. 코드를 중앙 저장소로 푸시하기 전에 개발자의 컴퓨터에서 수행하고, 푸시 한 후에는 전용 CI 서버에서 수행합니다. 두 기술 모두 유용하며, 둘 다 명령 행 전용 방식으로 테스트를 실행해야합니다.</p>
<h3 id="command-line">Command line</h3>

<p>명령 행</p>
<p>We’ve seen one example of running tests on the command line, using our <code>meteor npm run chimp-test</code> mode.</p>
<p>우리는 <code>meteor npm run chimp-test</code> 모드를 사용하여 명령 행에서 테스트를 실행하는 예제를 보았습니다.</p>
<p>We can also use a command-line driver for Mocha <a href="http://atmospherejs.com/dispatch/mocha-phantomjs" target="_blank" rel="external"><code>dispatch:mocha-phantomjs</code></a> to run our standard tests on the command line.</p>
<p>명령 행에서 표준 테스트를 실행하기 위해 Mocha <a href="http://atmospherejs.com/dispatch/mocha-phantomjs" target="_blank" rel="external"><code>dispatch:mocha-phantomjs</code></a> 용 명령 행 드라이버를 사용할 수도 있습니다.</p>
<p>Adding and using the package is straightforward:</p>
<p>패키지를 추가하고 사용하는 것은 간단합니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">meteor add dispatch:mocha-phantomjs</span><br><span class="line">meteor <span class="built_in">test</span> --once --driver-package dispatch:mocha-phantomjs</span><br></pre></td></tr></table></figure>
<p>(The <code>--once</code> argument ensures the Meteor process stops once the test is done).</p>
<p>(<code>--once</code> 인자는 테스트가 끝나면 유성 프로세스가 멈추는 것을 보장합니다.)</p>
<p>We can also add that command to our <code>package.json</code> as a <code>test</code> script:</p>
<p>또한 이 명령을 <code>test</code> 스크립트로 <code>package.json</code> 에 추가 할 수 있습니다 :</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"meteor test --once --driver-package dispatch:mocha-phantomjs"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now we can run the tests with <code>meteor npm test</code>.</p>
<p>이제 우리는 <code>meteor npm test</code> 로 테스트를 실행할 수 있습니다.</p>
<h3 id="using-circle-ci">CircleCI</h3>

<p>CircleCI</p>
<p><a href="https://circleci.com" target="_blank" rel="external">CircleCI</a> is a great continuous integration service that allows us to run (possibly time consuming) tests on every push to a repository like GitHub. To use it with the commandline test we’ve defined above, we can follow their standard <a href="https://circleci.com/docs/getting-started" target="_blank" rel="external">getting started tutorial</a> and use a <code>circle.yml</code> file similar to this:</p>
<p><a href="https://circleci.com" target="_blank" rel="external">CircleCI</a>는 GitHub와 같은 저장소에 대한 모든 테스트에서 (시간이 많이 소요되는) 테스트를 실행할 수있는 훌륭한 연속 통합 서비스입니다. 위에서 정의한 커맨드 라인 테스트와 함께 사용하기 위해 표준 <a href="https://circleci.com/docs/getting-started" target="_blank" rel="external">튜토리얼 시작하기</a>를 따르고 이것과 유사한 <code>circle.yml</code> 파일을 사용할 수 있습니다 :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">machine:</span><br><span class="line">  node:</span><br><span class="line">    version: 0.10.43</span><br><span class="line">dependencies:</span><br><span class="line">  override:</span><br><span class="line">    - curl https://install.meteor.com | /bin/sh</span><br><span class="line">    - npm install</span><br><span class="line">checkout:</span><br><span class="line">  post:</span><br><span class="line">    - git submodule update --init</span><br></pre></td></tr></table></figure>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev"
          href="accounts.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Users and Accounts
        </a>
      
      
        <a class="link primary next"
          href="routing.html">
          <span class="subtitle-pagination">Next</span>
          URLs and Routing
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/meteor/guide/tree/master/content/testing.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
    <div class="discourse-comments-wrapper content-wrapper">
      <div id='discourse-comments'></div>
    </div>

    <script type="text/javascript">
      DiscourseEmbed = { discourseUrl: 'https://forums.meteor.com/',
                         topicId: 20191 };

      (function() {
        var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
        d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
      })();
    </script>
  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/2.1.8/docsearch.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();

     
      
        // Segment Tracking
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
        analytics.load("zQx6cQifkTU79E3L0XAnmrOXP2A5bC6r");
        analytics.page()
        }}();
      

      // search box
      

        ['desktop'].forEach(function(type) {
          var search = docsearch({
            apiKey: 'bdf6b09d12024f6bae3631a0dfdd4a7f',
            indexName: 'meteor_api_guide',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      

      
        var REDIRECTS = {
  "/using-packages.html": "atmosphere-vs-npm.html",
  "/using-packages.html#npm": "using-npm-packages.html",
  "/using-packages.html#client-npm": "using-npm-packages.html#client-npm",
  "/using-packages.html#installing-npm": "using-npm-packages.html#installing-npm",
  "/using-packages.html#using-npm": "using-npm-packages.html#using-npm",
  "/using-packages.html#npm-styles": "using-npm-packages.html#npm-styles",
  "/using-packages.html#npm-shrinkwrap": "using-npm-packages.html#npm-shrinkwrap",
  "/using-packages.html#atmosphere": "using-atmosphere-packages.html",
  "/using-packages.html#atmosphere-searching": "using-atmosphere-packages.html#atmosphere-searching",
  "/using-packages.html#atmosphere-naming": "using-atmosphere-packages.html#atmosphere-naming",
  "/using-packages.html#installing-atmosphere": "using-atmosphere-packages.html#installing-atmosphere",
  "/using-packages.html#using-atmosphere": "using-atmosphere-packages.html#using-atmosphere",
  "/using-packages.html#importing-atmosphere-styles": "using-atmosphere-packages.html#importing-atmosphere-styles",
  "/using-packages.html#peer-npm-dependencies": "using-atmosphere-packages.html#peer-npm-dependencies",
  "/using-packages.html#package-namespacing": "using-atmosphere-packages.html#package-namespacing",
  "/using-packages.html#async-callbacks": "using-npm-packages.html#async-callbacks",
  "/using-packages.html#bind-environment": "using-npm-packages.html#bind-environment",
  "/using-packages.html#wrap-async": "using-npm-packages.html#wrap-async",
  "/using-packages.html#promises": "using-npm-packages.html#promises",
  "/using-packages.html#overriding-packages": "writing-npm-packages.html#overriding-npm-packages",
  "/using-packages.html#npm-overriding": "writing-npm-packages.html#overriding-npm-packages",
  "/using-packages.html#atmosphere-overriding": "writing-atmosphere-packages.html#overriding-atmosphere-packages",
  "/using-packages.html#npm-shrinkpack": "using-npm-packages.html#npm-shrinkpack",
  "/writing-packages.html": "writing-atmosphere-packages.html",
  "/writing-packages.html#npm-vs-atmosphere": "atmosphere-vs-npm.html",
  "/writing-packages.html#creating-npm": "writing-npm-packages.html",
  "/writing-packages.html#including-in-app": "writing-npm-packages.html#including-in-app",
  "/writing-packages.html#publishing-npm": "writing--packages.html#publishing-npm",
  "/writing-packages.html#creating": "writing-atmosphere-packages.html",
  "/writing-packages.html#adding-files": "writing-atmosphere-packages.html#adding-files",
  "/writing-packages.html#adding-javascript": "writing-atmosphere-packages.html#adding-javascript",
  "/writing-packages.html#adding-css": "writing-atmosphere-packages.html#adding-css",
  "/writing-packages.html#adding-style": "writing-atmosphere-packages.html#adding-style",
  "/writing-packages.html#adding-assests": "writing-atmosphere-packages.html#adding-assets",
  "/writing-packages.html#exporting": "writing-atmosphere-packages.html#exporting",
  "/writing-packages.html#dependencies": "writing-atmosphere-packages.html#dependencies",
  "/writing-packages.html#atmosphere-dependencies": "writing-atmosphere--packages.html#atmosphere-dependencies",
  "/writing-packages.html#meteor-version-dependencies": "writing-atmosphere-packages.html#meteor-version-dependencies",
  "/writing-packages.html#version-constraints": "writing-atmosphere-packages.html#version-constraints",
  "/writing-packages.html#npm-dependencies": "writing-atmosphere-packages.html#npm-dependencies",
  "/writing-packages.html#peer-npm-dependencies": "writing-atmosphere-packages.html#peer-npm-dependencies",
  "/writing-packages.html#cordova-plugins": "writing-atmosphere-packages.html#cordova-plugins",
  "/writing-packages.html#testing": "writing-atmosphere-packages.html#testing",
  "/writing-packages.html#testing-with-peer-dependencies": "writing-atmosphere-packages.html#testing-with-peer-dependencies",
  "/writing-packages.html#local-vs-published": "writing-atmosphere-packages.html#local-vs-published",
  "/writing-packages.html#build-plugins": "build-tool.html#build-plugins",
  "/writing-packages.html#types-of-build-plugins": "build-tool.html#types-of-build-plugins",
  "/writing-packages.html#writing-build-plugins": "build-tool.html#writing-build-plugins",
  "/writing-packages.html#caching-build-plugins": "build-tool.html#caching-build-plugins",
  "/testing.html#simple-unit-test": "testing.html#simple-blaze-unit-test"
};

        function redirect() {
          // Support redirects of the form /path#hash
          var locationKey = location.pathname + location.hash;
          if (REDIRECTS[locationKey]) {
            location.replace(location.origin + '/' + REDIRECTS[locationKey]);
          }

          // Support redirects of the form #hash (works for any path)
          var hashKey = location.hash;
          if (REDIRECTS[hashKey]) {
            location.replace(location.origin + '/' + REDIRECTS[hashKey]);
          }
        }

        // Redirect now
        redirect();

        // Redirect on hash change
        window.onhashchange = redirect;
      
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Migrating to Meteor 1.3 | Meteor Guide</title>
    <meta name="description" content="How to migrate your application to use recommended best practice as of Meteor 1.3.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="../images/favicon.png" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://meteor.realgrid.com">
    <meta property="og:title" content="Migrating to Meteor 1.3 | Meteor Guide">
    <meta property="og:description" content="How to migrate your application to use recommended best practice as of Meteor 1.3.">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@meteor">
    <meta name="twitter:title" content="Migrating to Meteor 1.3 | Meteor Guide">
    <meta name="twitter:description" content="How to migrate your application to use recommended best practice as of Meteor 1.3.">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/style/style.css">
  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="http://www.meteor.com/developers" title="Meteor Developers Developers"  >
        <img src="../images/logo-coralspace-left.svg" alt="Meteor Developers" class="logo"/>
        <span>Developers</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="http://www.meteor.com/tutorials" target=_new >
          <span>Tutorials</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop active ">
        <a class="link" href="http://guide.meteor.com"  >
          <span>Guide</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="http://docs.meteor.com"  >
          <span>API Docs</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="https://forums.meteor.com/" target=_new >
          <span>Forums</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="http://www.meteor.com/developers" title="Meteor Developers"  >
        <span>Meteor Developers Developers</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="http://www.meteor.com/tutorials" target=_new >
          <span>Tutorials</span>
        </a>
      </div>
    
      <div class="panel-item active"">
        <a class="" href="http://guide.meteor.com"  >
          <span>Guide</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://docs.meteor.com"  >
          <span>API Docs</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="https://forums.meteor.com/" target=_new >
          <span>Forums</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Meteor Guide</span>
      
        <span class="select version-sidebar nochrome">
          <select class="version-select">
            
              <option value="v1.4">1.4</option>
            
              <option value="v1.3">1.3</option>
            
              <option value="v1.2">1.2</option>
            
          </select>
        </span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search The Official Guide" id="desktop-search-input" />
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="code-style.html" class="sidebar-link ">
                  <span>Code Style</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="structure.html" class="sidebar-link ">
                  <span>Application Structure</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="1.4-migration.html" class="sidebar-link ">
                  <span>Migrating to Meteor 1.4</span>
                </a>
              </li>
            
              
              <li class="item-toc  current">
                <a href="" class="sidebar-link  current">
                  <span>Migrating to Meteor 1.3</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Data</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="collections.html" class="sidebar-link ">
                  <span>Collections and Schemas</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="data-loading.html" class="sidebar-link ">
                  <span>Publications and Data Loading</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="methods.html" class="sidebar-link ">
                  <span>Methods</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="accounts.html" class="sidebar-link ">
                  <span>Users and Accounts</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="testing.html" class="sidebar-link ">
                  <span>Testing</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">View</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="routing.html" class="sidebar-link ">
                  <span>URLs and Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="ui-ux.html" class="sidebar-link ">
                  <span>User Interfaces</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="blaze.html" class="sidebar-link ">
                  <span>Blaze</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="react.html" class="sidebar-link ">
                  <span>React</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="angular.html" class="sidebar-link ">
                  <span>Angular</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Build</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="atmosphere-vs-npm.html" class="sidebar-link ">
                  <span>Atmosphere vs. npm</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="using-atmosphere-packages.html" class="sidebar-link ">
                  <span>Using Atmosphere Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="writing-atmosphere-packages.html" class="sidebar-link ">
                  <span>Writing Atmosphere Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="using-npm-packages.html" class="sidebar-link ">
                  <span>Using npm Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="writing-npm-packages.html" class="sidebar-link ">
                  <span>Writing npm Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mobile.html" class="sidebar-link ">
                  <span>Mobile</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="build-tool.html" class="sidebar-link ">
                  <span>Build System</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Production</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="security.html" class="sidebar-link ">
                  <span>Security</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="deployment.html" class="sidebar-link ">
                  <span>Deployment and Monitoring</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Meta</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="CONTRIBUTING.html" class="sidebar-link ">
                  <span>Contribution Guidelines</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="CHANGELOG.html" class="sidebar-link ">
                  <span>Changelog</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Migrating to Meteor 1.3</h1>
      
        <div class="subtitle-page">How to migrate your application to use recommended best practice as of Meteor 1.3.</div>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/meteor/guide/tree/master/content/1.3-migration.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
            <a class="btn tertiary small round lowercase" href="https://forums.meteor.com/t/20190"><span class="icon-comment"></span> <span>Discuss</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <h2 id="breaking-changes">Breaking changes</h2>

<p>These are all the <em>breaking changes</em> – that is changes that you absolutely have to worry about if you are updating your app from 1.2.x to 1.3. However, we recommend that you also consider the <em>recommended</em> changes listed in the other sections below.</p>
<ul>
<li><p>Files in a directory named <code>imports/</code> will no longer load eagerly. (You should probably rename such a directory as it the basis of our new <a href="#modules">module system</a>).</p>
</li>
<li><p>Files within your app named <code>*.test[s].*</code>, <code>*.app-test[s].*</code>, <code>*.spec[s].*</code> and <code>*.app-spec[s].*</code> will no longer load eagerly (you should probably rename such a file if it doesn’t contain tests, as it will be eagerly loaded by our new <a href="#testing">app testing modes</a>).</p>
</li>
<li><p>If you are using React you will now need to install a set of React npm packages in your app. See the <a href="#react">recommendations for React</a> below for more details.</p>
</li>
</ul>
<h3 id="breaking-changes-mobile">Mobile</h3>

<ul>
<li><p>iOS apps now require iOS 8 or higher, and building for iOS requires Xcode 7.2 or higher to be installed.</p>
</li>
<li><p>Building for Android now requires Android SDK 23 to be installed. You may also need to create a new AVD for the emulator.</p>
</li>
<li><p>Cordova has been upgraded to the most recent versions (Cordova 6.0.0, Cordova iOS 4.0.1 and Cordova Android 5.1.0). This may require you to upgrade your plugin versions. We pin core Cordova plugins to versions known to be compatible and warn about this during build, but you may encounter compile time or runtime errors with third party plugins. Upgrading to newer versions of these plugins may help if they have been updated to work with recent versions of Cordova.</p>
</li>
<li><p>The plugin used to serve your app’s files and support hot code push has been completely rewritten. As a result, files are now served from <code>localhost</code> instead of <code>meteor.local</code>, with a fixed port number derived from your <code>appId</code>. You may have to update OAuth redirect URLs to point to the new local domain and port.</p>
</li>
</ul>
<h2 id="modules">Recommendations: modules</h2>

<p>The biggest new feature in Meteor 1.3 is support for <a href="https://developer.mozilla.org/en/docs/web/javascript/reference/statements/import" target="_blank" rel="external">ES2015 modules</a> on the client and the server. Using modules you can declare dependencies between files, control load order, and use npm packages on the client and server easily.</p>
<ul>
<li>You should load all Meteor “pseudo-globals” using the `import { Name } from ‘meteor/package’ syntax. For instance:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Meteor &#125; <span class="keyword">from</span> <span class="string">'meteor/meteor'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; EJSON &#125; <span class="keyword">from</span> <span class="string">'meteor/ejson'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>You should consider installing the <code>meteor-node-stubs</code> npm package to allow using npm packages written for <code>node</code> on the browser:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor npm install --save meteor-node-stubs</span><br></pre></td></tr></table></figure>
<ul>
<li>If you are using app-local packages to control load order and write unit tests for your application, we recommend you switch to using modules:<ul>
<li>Remove code related to the <a href="http://docs.meteor.com/#/full/packagejs" target="_blank" rel="external">Package API</a> from the <code>package.js</code> files and rename them to <code>index.js</code>,</li>
<li>Move your local packages to the <code>imports/</code> directory.</li>
<li>Add the necessary <code>import</code> statements to each of the modules in your packages.</li>
<li>Add <code>export</code> statements to each of your packages exports.</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">api.addFiles(<span class="string">'file.js'</span>);</span><br><span class="line"><span class="comment">// For files that are not imported elsewhere, this turns into</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./file.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Remove from package.js</span></span><br><span class="line">api.export(<span class="string">'Foo'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// localPackage/foo.js</span></span><br><span class="line"><span class="comment">// Foo must be explicitly exported</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Foo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// client/main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'/imports/localPackage'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>You can read about our recommended structure for applications and modules in the <a href="structure.html">Application Structure article</a> of the Meteor Guide, and how to test them in the <a href="testing.html">Testing article</a>.</p>
</li>
<li><p>If you are using Atmosphere packages which simply wrap npm packages, both on the client and server, it is now recommended that you simply install them using npm. Run <code>npm init</code> to initialize your <code>package.json</code> and install packages with <code>npm install --save</code> (or <code>npm install --save-dev</code> if it’s development dependency for testing etc.). We have <a href="using-packages.html#async-callbacks">some tips</a> about how to use npm packages written in an asynchronous style.</p>
</li>
</ul>
<p>Also, you should no longer need to use the <a href="https://atmospherejs.com/meteorhacks/npm" target="_blank" rel="external"><code>meteorhacks:npm</code></a> package. To migrate, follow the following steps:</p>
<ol>
<li>Remove packages from your app: <code>meteor remove meteorhacks:npm npm-container</code>.</li>
<li>Remove the generated <code>npm-container</code> package: <code>rm -r packages/npm-container</code>.</li>
<li>Move the contents of <code>packages.json</code> to the <code>dependencies</code> section of your <code>package.json</code> (you may need to create one with <code>meteor npm init</code>).</li>
<li>Simply use <a href="structure.html#intro-to-import-export"><code>import</code></a> instead of <code>Npm.require()</code>.</li>
</ol>
<h2 id="packages">Recommendations: package authors</h2>

<p>Package authors are recommended to:</p>
<ul>
<li><p>No longer publish wrapper packages that do no more than include an npm package / client side lib. If your package adds significant wrappers around the npm package, it might make sense however.</p>
</li>
<li><p>Publish to npm when appropriate, especially if your package can be used by the wider JS community!</p>
</li>
<li><p>Use <a href="http://1.3-docs.meteorapp.com/#/full/modularpackagestructure" target="_blank" rel="external"><code>api.mainModule()</code></a> and <code>export</code> from your main module rather than <code>api.exports()</code> in Atmosphere packages.</p>
</li>
<li><p>If you depend (directly or transitively) on a client side npm package that is large or problematic if installed twice (e.g. React), use <a href="https://github.com/tmeasday/check-npm-versions" target="_blank" rel="external"><code>tmeasday:check-npm-versions</code></a> to declare “peer” dependencies. If the client side npm package you depend on is <code>angular</code>, you can support both Meteor 1.2 and 1.3 using <a href="#angular-meteor-packages">this solution</a>. Read more about this in the <a href="writing-packages.html#peer-npm-dependencies">Writing Packages article</a>.</p>
</li>
</ul>
<h2 id="testing">Recommendations: Testing</h2>

<p>Meteor 1.3 includes a new command <code>meteor test</code>, which can be used to run tests against your app, in two modalities. You can read about these features in much more detail in the <a href="testing.html">Testing Guide Article</a>.</p>
<h3 id="full-app-testing">Full app testing</h3>

<p>If you were previously using <a href="http://xolv.io/velocity-announcement/" target="_blank" rel="external">Velocity</a> to run tests against your running Meteor app, the full app test mode should allow you to run your tests against 1.3, with some small changes.</p>
<ul>
<li><p>To convert tests, you’ll need to change or upgrade your test driver package to a 1.3 compatible package (as of this writing there is only one choice <a href="https://atmospherejs.com/practicalmeteor/mocha" target="_blank" rel="external"><code>practicalmeteor:mocha</code></a> but we expect more to exist in the future). You should name your test files in the pattern <code>*.app-test[s].*</code> and place them <em>outside</em> of <code>tests/</code> directories. To run the tests you can run <code>meteor test --full-app --driver-package &lt;driver-package&gt;</code></p>
</li>
<li><p>Note that full app test mode does not run the test reporter in a separate application to the app under test, and does not amalgamate results from multiple testing systems, as Velocity does. This effectively means if you are using more than one testing system, you will need to run <code>meteor test --full-app</code> multiple times.</p>
</li>
<li><p>Also, it means certain types of tests are better off written as <a href="testing.html#acceptance-tests"><em>acceptance tests</em></a> outside of the Meteor tool.</p>
</li>
</ul>
<h3 id="module-testing">Module testing</h3>

<p>If you were previously using in-app packages in order to unit test your app, you should switch to a <a href="#modules">modules-based approach</a> and test them using the normal test mode.</p>
<ul>
<li><p>To convert your unit tests to run against the app, first upgrade your test driver (see <a href="#full-app-testing">above</a>) and then place your test files alongside the modules they are testing with a name matching <code>*.tests.*</code>. Such files will automatically be added to your “test app” when you run <code>meteor test --driver-package &lt;driver-package&gt;</code>. You can <code>import</code> the modules that you need to test against within each test file.</p>
</li>
<li><p>Some example tests can be seen the <a href="https://github.com/meteor/todos" target="_blank" rel="external">Todos example app</a></p>
</li>
</ul>
<h2 id="mobile">Recommendations: Mobile</h2>

<p>Alongside some of the breaking mobile changes <a href="#breaking-changes-mobile">listed above</a>, there are some changes in the way the mobile integration works that you should consider:</p>
<ul>
<li><p>Some low resolution app icon and launch images sizes for now unsupported devices have been deprecated. To avoid a deprecation warning during build, please remove the entries from your <code>mobile-config.js</code>. (You probably also want to remove the image files from your project.)</p>
</li>
<li><p>The plugin now allows for local file access on both iOS and Android. You can construct file system URLs manually (<code>http://localhost:&lt;port&gt;/local-filesystem/&lt;path&gt;</code>) or use <code>WebAppLocalServer.localFileSystemUrl()</code> to convert a <code>file://</code> URL.</p>
</li>
</ul>
<h2 id="react">Install React from npm</h2>

<p>In Meteor 1.3, we recommend installing <code>react</code> and <code>react-dom</code> <a href="react.html#using-with-meteor">into your app using npm</a>, and importing them from your app code:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br></pre></td></tr></table></figure>
<p>As mentioned in the <a href="#breaking-changes">breaking changes</a>, the <code>react</code> Atmosphere package still works, but it now expects you to install the React npm packages it uses in your application (read the <a href="using-packages.html">Using Packages</a> article for more details about how to manage your npm dependencies):</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">npm </span><span class="string">install </span><span class="built_in">--save</span> <span class="string">react </span><span class="string">react-dom </span><span class="string">react-addons-</span><span class="string">transition-group </span>\</span><br><span class="line"> <span class="string">react-addons-</span><span class="string">css-transition-</span><span class="string">group </span><span class="string">react-addons-</span><span class="string">linked-state-</span><span class="string">mixin </span>\</span><br><span class="line"> <span class="string">react-addons-</span><span class="built_in">create-fragment</span> <span class="string">react-addons-</span><span class="string">update </span><span class="string">react-addons-</span><span class="string">pure-render-</span><span class="string">mixin </span>\</span><br><span class="line"> <span class="string">react-addons-</span><span class="string">test-utils </span><span class="string">react-addons-</span><span class="string">perf</span></span><br></pre></td></tr></table></figure>
<p><strong>However</strong>, we recommend that you should stop using the <code>react</code> or <code>react-runtime</code> Atmosphere packages and instead install React directly from npm (for more detail, see the <a href="react.html">React article</a> of the guide). To make this change in an existing app, you can run:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">meteor remove react</span><br><span class="line"></span><br><span class="line"><span class="comment"># if you are using our data integration</span></span><br><span class="line">meteor <span class="keyword">add</span><span class="bash"> react-meteor-data</span><br><span class="line"></span></span><br><span class="line">npm install --save react react-dom react-addons-pure-render-mixin</span><br></pre></td></tr></table></figure>
<p>Then, in your application, you should import React directly rather than <a href="#modules">relying on a global React symbol</a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br></pre></td></tr></table></figure>
<p>If you are using a package that depends on the <code>react</code> or <code>react-runtime</code> Atmosphere packages, you will still need to install the full list of npm React packages above, so we encourage package authors to update their packages to import React directly from npm.</p>
<h3 id="react-meteor-data">Loading data with React</h3>

<p>The <code>react-meteor-data</code> has a <a href="react.html#data">new <code>createContainer</code> syntax</a> for combining Meteor’s data system with React in an idiomatic way. We encourage you to use containers to separate your data loading concerns from your presentational components!</p>
<h2 id="react">Install Angular from npm</h2>

<p>With an Angular Meteor app you can safely update to Meteor 1.3 without any changes to your code.<br>You just need to make sure you are using the latest <code>angular</code> Atmosphere package <code>1.3.9_2</code>.</p>
<p>But, in Meteor 1.3, we recommend installing <code>angular</code> and <code>angular-meteor</code> into your app using npm:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> <span class="comment">--save angular angular-meteor</span></span><br></pre></td></tr></table></figure></p>
<p>and importing them from your app code:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> angular <span class="keyword">from</span> <span class="string">'angular'</span>;</span><br><span class="line"><span class="keyword">import</span> angular-meteor <span class="keyword">from</span> <span class="string">'angular-meteor'</span>;</span><br></pre></td></tr></table></figure></p>
<p>Read the <a href="using-packages.html">Using Packages</a> article for more details about how to manage your npm dependencies.</p>
<p>If you already using the Atmosphere packages and want to move to the npm packages, you will need to remove the Atmosphere packages first but keep the angular-templates Atmosphere package:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">meteor remove angular</span><br><span class="line">meteor <span class="keyword">add</span><span class="bash"> angular-templates</span><br><span class="line"></span></span><br><span class="line">npm install --save angular angular-meteor</span><br></pre></td></tr></table></figure>
<p>Then, in your application, you should import angular directly rather than <a href="#modules">relying on global angular</a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> angular <span class="keyword">from</span> <span class="string">'angular'</span>;</span><br><span class="line"><span class="keyword">import</span> angular-meteor <span class="keyword">from</span> <span class="string">'angular-meteor'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="angular-meteor-packages">Existing Angular Atmosphere packages</h3>

<p>If you are a package author that depends on the <code>angular:angular</code> Atmosphere package, you can support both Meteor 1.2 and 1.3 so your users will have an easy and unbreaking update process:</p>
<p>Change your <code>angular:angular</code> dependency into a weak dependency:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">api.use(<span class="string">'angular:angular@1.5.3'</span>, <span class="string">'client'</span>, &#123; <span class="attr">weak</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure></p>
<p>and then add a dependency check for both Meteor 1.2 and 1.3 before initializing your angular module:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">window</span>.angular) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Package[<span class="string">'modules-runtime'</span>]) &#123;</span><br><span class="line">      <span class="keyword">var</span> <span class="built_in">require</span> = Package[<span class="string">'modules-runtime'</span>].meteorInstall();</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'angular'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'angular package is missing'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">angular.module(<span class="string">'your.module'</span>, []);</span><br></pre></td></tr></table></figure></p>
<h2 id="guide">New guide articles</h2>

<p>As part of the 1.3 release, we have some new guide articles and updated sections of existing articles:</p>
<ul>
<li><p>There’s a <a href="structure.html">Application Structure</a> article which explains how to structure your files and use the module system.</p>
</li>
<li><p>There’s a <a href="code-style.html">Code Style</a> article that makes recommendations about how to ensure consistent formatting for your code.</p>
</li>
<li><p>There’s a <a href="testing.html">Testing</a> article which covers how to do various kinds of testing in Meteor.</p>
</li>
<li><p>There’s a <a href="react.html">React</a> article which explains how to best use React with Meteor</p>
</li>
<li><p>There’s a <a href="mobile.html">Mobile</a> article which covers how to best use our Cordova integration.</p>
</li>
<li><p>There’s a <a href="using-packages.html">Using Packages</a> article which explains how best to use both npm and Atmosphere packages in your app.</p>
</li>
</ul>
<ul>
<li><p>There’s a <a href="writing-packages.html">Writing Packages</a> article which explains practice for writing Atmosphere packages and using all kinds of dependencies within them.</p>
</li>
<li><p>The UI/UX article has been updated to explain how to do <a href="ui-ux.html#i18n">i18n</a> in Meteor applications.</p>
</li>
</ul>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev"
          href="1.4-migration.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Migrating to Meteor 1.4
        </a>
      
      
        <a class="link primary next"
          href="collections.html">
          <span class="subtitle-pagination">Next</span>
          Collections and Schemas
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/meteor/guide/tree/master/content/1.3-migration.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
    <div class="discourse-comments-wrapper content-wrapper">
      <div id='discourse-comments'></div>
    </div>

    <script type="text/javascript">
      DiscourseEmbed = { discourseUrl: 'https://forums.meteor.com/',
                         topicId: 20190 };

      (function() {
        var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
        d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
      })();
    </script>
  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/2.1.8/docsearch.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();

     
      
        // Segment Tracking
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
        analytics.load("zQx6cQifkTU79E3L0XAnmrOXP2A5bC6r");
        analytics.page()
        }}();
      

      // search box
      

        ['desktop'].forEach(function(type) {
          var search = docsearch({
            apiKey: 'bdf6b09d12024f6bae3631a0dfdd4a7f',
            indexName: 'meteor_api_guide',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      

      
        var REDIRECTS = {
  "/using-packages.html": "atmosphere-vs-npm.html",
  "/using-packages.html#npm": "using-npm-packages.html",
  "/using-packages.html#client-npm": "using-npm-packages.html#client-npm",
  "/using-packages.html#installing-npm": "using-npm-packages.html#installing-npm",
  "/using-packages.html#using-npm": "using-npm-packages.html#using-npm",
  "/using-packages.html#npm-styles": "using-npm-packages.html#npm-styles",
  "/using-packages.html#npm-shrinkwrap": "using-npm-packages.html#npm-shrinkwrap",
  "/using-packages.html#atmosphere": "using-atmosphere-packages.html",
  "/using-packages.html#atmosphere-searching": "using-atmosphere-packages.html#atmosphere-searching",
  "/using-packages.html#atmosphere-naming": "using-atmosphere-packages.html#atmosphere-naming",
  "/using-packages.html#installing-atmosphere": "using-atmosphere-packages.html#installing-atmosphere",
  "/using-packages.html#using-atmosphere": "using-atmosphere-packages.html#using-atmosphere",
  "/using-packages.html#importing-atmosphere-styles": "using-atmosphere-packages.html#importing-atmosphere-styles",
  "/using-packages.html#peer-npm-dependencies": "using-atmosphere-packages.html#peer-npm-dependencies",
  "/using-packages.html#package-namespacing": "using-atmosphere-packages.html#package-namespacing",
  "/using-packages.html#async-callbacks": "using-npm-packages.html#async-callbacks",
  "/using-packages.html#bind-environment": "using-npm-packages.html#bind-environment",
  "/using-packages.html#wrap-async": "using-npm-packages.html#wrap-async",
  "/using-packages.html#promises": "using-npm-packages.html#promises",
  "/using-packages.html#overriding-packages": "writing-npm-packages.html#overriding-npm-packages",
  "/using-packages.html#npm-overriding": "writing-npm-packages.html#overriding-npm-packages",
  "/using-packages.html#atmosphere-overriding": "writing-atmosphere-packages.html#overriding-atmosphere-packages",
  "/using-packages.html#npm-shrinkpack": "using-npm-packages.html#npm-shrinkpack",
  "/writing-packages.html": "writing-atmosphere-packages.html",
  "/writing-packages.html#npm-vs-atmosphere": "atmosphere-vs-npm.html",
  "/writing-packages.html#creating-npm": "writing-npm-packages.html",
  "/writing-packages.html#including-in-app": "writing-npm-packages.html#including-in-app",
  "/writing-packages.html#publishing-npm": "writing--packages.html#publishing-npm",
  "/writing-packages.html#creating": "writing-atmosphere-packages.html",
  "/writing-packages.html#adding-files": "writing-atmosphere-packages.html#adding-files",
  "/writing-packages.html#adding-javascript": "writing-atmosphere-packages.html#adding-javascript",
  "/writing-packages.html#adding-css": "writing-atmosphere-packages.html#adding-css",
  "/writing-packages.html#adding-style": "writing-atmosphere-packages.html#adding-style",
  "/writing-packages.html#adding-assests": "writing-atmosphere-packages.html#adding-assets",
  "/writing-packages.html#exporting": "writing-atmosphere-packages.html#exporting",
  "/writing-packages.html#dependencies": "writing-atmosphere-packages.html#dependencies",
  "/writing-packages.html#atmosphere-dependencies": "writing-atmosphere--packages.html#atmosphere-dependencies",
  "/writing-packages.html#meteor-version-dependencies": "writing-atmosphere-packages.html#meteor-version-dependencies",
  "/writing-packages.html#version-constraints": "writing-atmosphere-packages.html#version-constraints",
  "/writing-packages.html#npm-dependencies": "writing-atmosphere-packages.html#npm-dependencies",
  "/writing-packages.html#peer-npm-dependencies": "writing-atmosphere-packages.html#peer-npm-dependencies",
  "/writing-packages.html#cordova-plugins": "writing-atmosphere-packages.html#cordova-plugins",
  "/writing-packages.html#testing": "writing-atmosphere-packages.html#testing",
  "/writing-packages.html#testing-with-peer-dependencies": "writing-atmosphere-packages.html#testing-with-peer-dependencies",
  "/writing-packages.html#local-vs-published": "writing-atmosphere-packages.html#local-vs-published",
  "/writing-packages.html#build-plugins": "build-tool.html#build-plugins",
  "/writing-packages.html#types-of-build-plugins": "build-tool.html#types-of-build-plugins",
  "/writing-packages.html#writing-build-plugins": "build-tool.html#writing-build-plugins",
  "/writing-packages.html#caching-build-plugins": "build-tool.html#caching-build-plugins",
  "/testing.html#simple-unit-test": "testing.html#simple-blaze-unit-test"
};

        function redirect() {
          // Support redirects of the form /path#hash
          var locationKey = location.pathname + location.hash;
          if (REDIRECTS[locationKey]) {
            location.replace(location.origin + '/' + REDIRECTS[locationKey]);
          }

          // Support redirects of the form #hash (works for any path)
          var hashKey = location.hash;
          if (REDIRECTS[hashKey]) {
            location.replace(location.origin + '/' + REDIRECTS[hashKey]);
          }
        }

        // Redirect now
        redirect();

        // Redirect on hash change
        window.onhashchange = redirect;
      
    </script>
  </body>
</html>
